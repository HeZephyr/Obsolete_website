(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{456:function(s,n,a){"use strict";a.r(n);var e=a(0),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[n("a",{attrs:{href:"https://github.com/unique-pure/ostep/tree/main/Virtualization/01.Process%20Introduction",target:"_blank",rel:"noopener noreferrer"}},[s._v("github代码"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"_1-program-explanation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-program-explanation"}},[s._v("#")]),s._v(" 1 Program Explanation")]),s._v(" "),n("p",[n("code",[s._v("process-run.py")]),s._v("：可以查看进程状态在CPU上运行时如何变化。\n进程可以处于以下几种不同的状态：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("RUNNING")]),s._v("：进程正在使用CPU")]),s._v(" "),n("li",[n("code",[s._v("READY")]),s._v("：进程现在可以使用CPU但其他进程正在使用")]),s._v(" "),n("li",[n("code",[s._v("BLOCKED")]),s._v("：进程正在等待I/O（例如，它向磁盘发送请求）")]),s._v(" "),n("li",[n("code",[s._v("DONE")]),s._v("：进程已经执行完成")])]),s._v(" "),n("p",[s._v("要运行该程序获取其选项，可执行以下操作\n"),n("code",[s._v("./process-run.py -h")]),s._v("\n或者\n"),n("code",[s._v("python process-run.py -h")]),s._v("\n得到：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Usage: process-run.py [options]\n\nOptions:\n  -h, --help            show this help message and exit\n  -s SEED, --seed=SEED  the random seed\n  -l PROCESS_LIST, --processlist=PROCESS_LIST\n                        a comma-separated list of processes to run, in the\n                        form X1:Y1,X2:Y2,... where X is the number of\n                        instructions that process should run, and Y the\n                        chances (from 0 to 100) that an instruction will use\n                        the CPU or issue an IO\n  -L IO_LENGTH, --iolength=IO_LENGTH\n                        how long an IO takes\n  -S PROCESS_SWITCH_BEHAVIOR, --switch=PROCESS_SWITCH_BEHAVIOR\n                        when to switch between processes: SWITCH_ON_IO,\n                        SWITCH_ON_END\n  -I IO_DONE_BEHAVIOR, --iodone=IO_DONE_BEHAVIOR\n                        type of behavior when IO ends: IO_RUN_LATER,\n                        IO_RUN_IMMEDIATE\n  -c                    compute answers for me\n  -p, --printstats      print statistics at end; only useful with -c flag\n                        (otherwise stats are not printed)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("p",[s._v("要理解的最重要的选项是 PROCESS_LIST（由 -l 或 --processlist 参数指定），它准确指定每个正在运行的程序（或“进程”）将执行的操作。一个进程由指令组成，每条指令只能执行以下两件事之一：")]),s._v(" "),n("blockquote",[n("ul",[n("li",[s._v("使用CPU\n请求IO（并等待其完成）")])])]),s._v(" "),n("p",[s._v("当进程使用 CPU（不执行 IO）时，它应该简单地在 CPU 上运行或准备运行之间交替。例如，这是一个简单的运行，仅运行一个程序，并且该程序仅使用 CPU（不执行 IO）。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py -l 5:100\nProduce a trace of what would happen when you run these processes:\nProcess 0\n  cpu\n  cpu\n  cpu\n  cpu\n  cpu\n\nImportant behaviors:\n  System will switch when the current process is FINISHED or ISSUES AN IO\n  After IOs, the process issuing the IO will run LATER (when it is its turn)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("这里，我们指定的进程是“5:100”，这意味着它应该由5条指令组成，并且每条指令是CPU指令的机会是100%。\n我们可以使用-c参数来查看进程发生了什么：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py -l 5:100 -c\nTime        PID: 0           CPU           IOs\n  1        RUN:cpu             1          \n  2        RUN:cpu             1          \n  3        RUN:cpu             1          \n  4        RUN:cpu             1          \n  5        RUN:cpu             1 \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("这个结果并不是太有趣：该过程在 RUNNING 状态下很简单，然后完成，始终使用 CPU，从而使 CPU 在整个运行过程中保持忙碌，并且不执行任何 I/O。\n我们可以运行三个进程看看结果：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py -l 5:100,5:100,5:100 -c\nTime        PID: 0        PID: 1        PID: 2           CPU           IOs\n  1        RUN:cpu         READY         READY             1          \n  2        RUN:cpu         READY         READY             1          \n  3        RUN:cpu         READY         READY             1          \n  4        RUN:cpu         READY         READY             1          \n  5        RUN:cpu         READY         READY             1          \n  6           DONE       RUN:cpu         READY             1          \n  7           DONE       RUN:cpu         READY             1          \n  8           DONE       RUN:cpu         READY             1          \n  9           DONE       RUN:cpu         READY             1          \n 10           DONE       RUN:cpu         READY             1          \n 11           DONE          DONE       RUN:cpu             1          \n 12           DONE          DONE       RUN:cpu             1          \n 13           DONE          DONE       RUN:cpu             1          \n 14           DONE          DONE       RUN:cpu             1          \n 15           DONE          DONE       RUN:cpu             1  \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("首先首先“进程 ID”（或“PID”）为 0 的进程运行，而进程 1 和进程2已准备好运行，但只是等待 0 完成。当0完成时，它进入DONE状态，而1则运行，2继续等待。当 1 完成时，则2才开始运行。")]),s._v(" "),n("p",[s._v("我们继续看一个例子，在此示例中，进程仅发出I/O请求。我们使用"),n("code",[s._v("-L")]),s._v("参数指定I/O需要5个时间单位才能完成。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py -l 3:0 -L 5\nProduce a trace of what would happen when you run these processes:\nProcess 0\n  io\n  io_done\n  io\n  io_done\n  io\n  io_done\n\nImportant behaviors:\n  System will switch when the current process is FINISHED or ISSUES AN IO\n  After IOs, the process issuing the IO will run LATER (when it is its turn)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("我们设置跟踪参数看看会是什么样子：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py -l 3:0 -L 5 -c\nTime        PID: 0           CPU           IOs\n  1         RUN:io             1          \n  2        BLOCKED                           1\n  3        BLOCKED                           1\n  4        BLOCKED                           1\n  5        BLOCKED                           1\n  6        BLOCKED                           1\n  7*   RUN:io_done             1          \n  8         RUN:io             1          \n  9        BLOCKED                           1\n 10        BLOCKED                           1\n 11        BLOCKED                           1\n 12        BLOCKED                           1\n 13        BLOCKED                           1\n 14*   RUN:io_done             1          \n 15         RUN:io             1          \n 16        BLOCKED                           1\n 17        BLOCKED                           1\n 18        BLOCKED                           1\n 19        BLOCKED                           1\n 20        BLOCKED                           1\n 21*   RUN:io_done             1          \n❯ python process-run.py -l 3:0 -L 5 -c\nTime        PID: 0           CPU           IOs\n  1         RUN:io             1          \n  2        BLOCKED                           1\n  3        BLOCKED                           1\n  4        BLOCKED                           1\n  5        BLOCKED                           1\n  6        BLOCKED                           1\n  7*   RUN:io_done             1          \n  8         RUN:io             1          \n  9        BLOCKED                           1\n 10        BLOCKED                           1\n 11        BLOCKED                           1\n 12        BLOCKED                           1\n 13        BLOCKED                           1\n 14*   RUN:io_done             1          \n 15         RUN:io             1          \n 16        BLOCKED                           1\n 17        BLOCKED                           1\n 18        BLOCKED                           1\n 19        BLOCKED                           1\n 20        BLOCKED                           1\n 21*   RUN:io_done             1 \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br")])]),n("p",[s._v("如上所示，该程序仅发出三个 I/O。当发出每个 I/O 时，进程将进入 BLOCKED 状态，当设备忙于为 I/O 提供服务时，CPU 处于空闲状态。\n为了处理 I/O 的完成，还会发生一项 CPU 操作。请注意，处理 I/O 启动和完成的单个指令并不是特别现实，但这里只是为了简单起见而使用。让我们打印一些统计信息（运行与上面相同的命令，但使用 -p 参数）来查看一些总体行为：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Stats: Total Time 21\nStats: CPU Busy 6 (28.57%)\nStats: IO Busy  15 (71.43%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("如上所示，跟踪运行需要 21 个时钟周期，但 CPU 忙碌的时间不到 30%。另一方面，I/O 设备却相当忙碌。一般来说，我们希望让所有设备保持忙碌，因为这样可以更好地利用资源。")]),s._v(" "),n("h2",{attrs:{id:"_2-qa"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-qa"}},[s._v("#")]),s._v(" 2 QA")]),s._v(" "),n("ol",[n("li",[s._v("运行 "),n("code",[s._v("process-run.py")]),s._v("，指定参数："),n("code",[s._v("-l 5:100")]),s._v("。CPU 利用率应该是多少（例如，CPU 使用时间的百分比）？使用 -c 和 -p 参数来查看你是否正确。\n"),n("blockquote",[n("p",[s._v("CPU利用率为100%，因为有5条指令，使用CPU的指令机会为100%。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py  -l 5:100 -c -p\n Time        PID: 0           CPU           IOs\n 1        RUN:cpu             1          \n 2        RUN:cpu             1          \n 3        RUN:cpu             1          \n 4        RUN:cpu             1          \n 5        RUN:cpu             1          \n\n Stats: Total Time 5\n Stats: CPU Busy 5 (100.00%)\n Stats: IO Busy  0 (0.00%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])]),s._v(" "),n("li",[s._v("运行："),n("code",[s._v("./process-run.py -l 4:100,1:0")]),s._v("。这些参数指定一个具有 4 条指令的进程（全部使用 CPU），以及一个仅发出 I/O 并等待其完成的进程。完成这两个过程需要多长时间？使用 -c 和 -p 来看看你是否正确。\n"),n("blockquote",[n("p",[s._v("PID为0的进程运行四条指令需要4，PID为1的进程完成IO需要5，但是发出IO指令以及完成IO指令需要CPU，所以为4+5+2=11。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" ❯ python process-run.py  -l 4:100,1:0 -c -p\n Time        PID: 0        PID: 1           CPU           IOs\n   1        RUN:cpu         READY             1          \n   2        RUN:cpu         READY             1          \n   3        RUN:cpu         READY             1          \n   4        RUN:cpu         READY             1          \n   5           DONE        RUN:io             1          \n   6           DONE       BLOCKED                           1\n   7           DONE       BLOCKED                           1\n   8           DONE       BLOCKED                           1\n   9           DONE       BLOCKED                           1\n 10           DONE       BLOCKED                           1\n 11*          DONE   RUN:io_done             1          \n\n Stats: Total Time 11\n Stats: CPU Busy 6 (54.55%)\n Stats: IO Busy  5 (45.45%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])])]),s._v(" "),n("li",[s._v("改变进程的顺序： "),n("code",[s._v("./process-run.py -l 1:0,4:100")]),s._v("。现在会发生什么？切换顺序重要吗？为什么？（像往常一样，使用 -c 和 -p 查看你是否正确）\n这样进程0就可以先获得CPU发起IO请求，然后进行I/O。此时CPU空闲，进程1则可以获得CPU。在2中，进程0则需要等到进程1运行完成才可以获得。这节省了时间。"),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py  -l 1:0,4:100 -c -p\n Time        PID: 0        PID: 1           CPU           IOs\n   1         RUN:io         READY             1          \n   2        BLOCKED       RUN:cpu             1             1\n   3        BLOCKED       RUN:cpu             1             1\n   4        BLOCKED       RUN:cpu             1             1\n   5        BLOCKED       RUN:cpu             1             1\n   6        BLOCKED          DONE                           1\n   7*   RUN:io_done          DONE             1          \n\n Stats: Total Time 7\n Stats: CPU Busy 6 (85.71%)\n Stats: IO Busy  5 (71.43%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])])]),s._v(" "),n("li",[s._v("现在我们来看看其他一些参数。其中一个重要的参数是 -S，它决定了当一个进程发出 I/O 时系统的反应。将该标志设置为 SWITCH ON END 时，当一个进程正在进行 I/O 时，系统不会切换到另一个进程，而是等待该进程完全结束。如果运行以下两个进程（"),n("code",[s._v("-l 1:0,4:100 -c -S SWITCH_ON_END")]),s._v("），其中一个正在执行 I/O 操作，另一个正在执行 CPU 操作，会发生什么情况？\n"),n("blockquote",[n("p",[s._v("此时进程0会一直占用CPU，直到I/O操作完成。用时也是11。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py  -l 1:0,4:100 -c -S SWITCH_ON_END -p\n Time        PID: 0        PID: 1           CPU           IOs\n   1         RUN:io         READY             1          \n   2        BLOCKED         READY                           1\n   3        BLOCKED         READY                           1\n   4        BLOCKED         READY                           1\n   5        BLOCKED         READY                           1\n   6        BLOCKED         READY                           1\n   7*   RUN:io_done         READY             1          \n   8           DONE       RUN:cpu             1          \n   9           DONE       RUN:cpu             1          \n   10           DONE       RUN:cpu             1          \n   11           DONE       RUN:cpu             1          \n\n   Stats: Total Time 11\n   Stats: CPU Busy 6 (54.55%)\n   Stats: IO Busy  5 (45.45%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])])]),s._v(" "),n("li",[s._v("现在，运行相同的进程，但将切换行为设置为每当一个进程等待 I/O 时就切换到另一个进程（"),n("code",[s._v("-l 1:0,4:100 -c -S SWITCH_ON_IO")]),s._v("）。现在会发生什么？使用 -c 和 -p 来确认是否正确。\n"),n("blockquote",[n("p",[s._v("此时进程0发起I/O请求后，操作系统就会切换进程，总用时为7")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py  -l 1:0,4:100 -c -S SWITCH_ON_IO -p\n Time        PID: 0        PID: 1           CPU           IOs\n   1         RUN:io         READY             1          \n   2        BLOCKED       RUN:cpu             1             1\n   3        BLOCKED       RUN:cpu             1             1\n   4        BLOCKED       RUN:cpu             1             1\n   5        BLOCKED       RUN:cpu             1             1\n   6        BLOCKED          DONE                           1\n   7*   RUN:io_done          DONE             1          \n\n Stats: Total Time 7\n Stats: CPU Busy 6 (85.71%)\n Stats: IO Busy  5 (71.43%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])])]),s._v(" "),n("li",[s._v("另一个重要的行为是在 I/O 完成时该做什么。使用 "),n("code",[s._v("-I IO RUN LATER")]),s._v(" 选项时，当 I/O 完成时，发出它的进程不一定会立即运行；相反，正在运行的内容将继续运行。当您运行这组进程组合时会发生什么？（运行 "),n("code",[s._v("python process-run.py -l 3:0,5:100,5:100,5:100 -S SWITCH_ON_IO -I IO_RUN_LATER -c -p")]),s._v("）系统资源是否得到有效利用？\n"),n("blockquote",[n("p",[s._v("此时系统资源没有得到有效利用。因为CPU处理I/O完成越早，进程就可以继续处理I/O，它可以在不占用CPU的时候进行。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py -l 3:0,5:100,5:100,5:100 -S SWITCH_ON_IO -I IO_RUN_LATER -c -p\n Time        PID: 0        PID: 1        PID: 2        PID: 3           CPU           IOs\n   1         RUN:io         READY         READY         READY             1          \n   2        BLOCKED       RUN:cpu         READY         READY             1             1\n   3        BLOCKED       RUN:cpu         READY         READY             1             1\n   4        BLOCKED       RUN:cpu         READY         READY             1             1\n   5        BLOCKED       RUN:cpu         READY         READY             1             1\n   6        BLOCKED       RUN:cpu         READY         READY             1             1\n   7*         READY          DONE       RUN:cpu         READY             1          \n   8          READY          DONE       RUN:cpu         READY             1          \n   9          READY          DONE       RUN:cpu         READY             1          \n 10          READY          DONE       RUN:cpu         READY             1          \n 11          READY          DONE       RUN:cpu         READY             1          \n 12          READY          DONE          DONE       RUN:cpu             1          \n 13          READY          DONE          DONE       RUN:cpu             1          \n 14          READY          DONE          DONE       RUN:cpu             1          \n 15          READY          DONE          DONE       RUN:cpu             1          \n 16          READY          DONE          DONE       RUN:cpu             1          \n 17    RUN:io_done          DONE          DONE          DONE             1          \n 18         RUN:io          DONE          DONE          DONE             1          \n 19        BLOCKED          DONE          DONE          DONE                           1\n 20        BLOCKED          DONE          DONE          DONE                           1\n 21        BLOCKED          DONE          DONE          DONE                           1\n 22        BLOCKED          DONE          DONE          DONE                           1\n 23        BLOCKED          DONE          DONE          DONE                           1\n 24*   RUN:io_done          DONE          DONE          DONE             1          \n 25         RUN:io          DONE          DONE          DONE             1          \n 26        BLOCKED          DONE          DONE          DONE                           1\n 27        BLOCKED          DONE          DONE          DONE                           1\n 28        BLOCKED          DONE          DONE          DONE                           1\n 29        BLOCKED          DONE          DONE          DONE                           1\n 30        BLOCKED          DONE          DONE          DONE                           1\n 31*   RUN:io_done          DONE          DONE          DONE             1          \n\n Stats: Total Time 31\n Stats: CPU Busy 21 (67.74%)\n Stats: IO Busy  15 (48.39%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])])]),s._v(" "),n("li",[s._v("现在运行相同的进程，但使用 "),n("code",[s._v("-I IO_RUN_IMMEDIATE")]),s._v(" 设置，该设置会立即运行发出 I/O 的进程。这种行为有何不同？为什么再次运行刚完成 I/O 的进程可能是个好主意？\n"),n("blockquote",[n("p",[s._v("这种行为会让进程处理I/O请求的时候还给其他CPU，但完成后立即获得CPU，能让I/O处理和CPU处理一起进行，节省总时间，有效提高CPU利用率。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py -l 3:0,5:100,5:100,5:100 -S SWITCH_ON_IO -I IO_RUN_IMMEDIATE -c -p\n Time        PID: 0        PID: 1        PID: 2        PID: 3           CPU           IOs\n   1         RUN:io         READY         READY         READY             1          \n   2        BLOCKED       RUN:cpu         READY         READY             1             1\n   3        BLOCKED       RUN:cpu         READY         READY             1             1\n   4        BLOCKED       RUN:cpu         READY         READY             1             1\n   5        BLOCKED       RUN:cpu         READY         READY             1             1\n   6        BLOCKED       RUN:cpu         READY         READY             1             1\n   7*   RUN:io_done          DONE         READY         READY             1          \n   8         RUN:io          DONE         READY         READY             1          \n   9        BLOCKED          DONE       RUN:cpu         READY             1             1\n 10        BLOCKED          DONE       RUN:cpu         READY             1             1\n 11        BLOCKED          DONE       RUN:cpu         READY             1             1\n 12        BLOCKED          DONE       RUN:cpu         READY             1             1\n 13        BLOCKED          DONE       RUN:cpu         READY             1             1\n 14*   RUN:io_done          DONE          DONE         READY             1          \n 15         RUN:io          DONE          DONE         READY             1          \n 16        BLOCKED          DONE          DONE       RUN:cpu             1             1\n 17        BLOCKED          DONE          DONE       RUN:cpu             1             1\n 18        BLOCKED          DONE          DONE       RUN:cpu             1             1\n 19        BLOCKED          DONE          DONE       RUN:cpu             1             1\n 20        BLOCKED          DONE          DONE       RUN:cpu             1             1\n 21*   RUN:io_done          DONE          DONE          DONE             1          \n\n Stats: Total Time 21\n Stats: CPU Busy 21 (100.00%)\n Stats: IO Busy  15 (71.43%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])])]),s._v(" "),n("li",[s._v("现在运行一些随机生成的进程："),n("code",[s._v("-s 1 -l 3:50,3:50")]),s._v(" 或 "),n("code",[s._v("-s 2 -l 3:50,3:50")]),s._v(" 或 "),n("code",[s._v("-s 3 -l 3:50,3:50")]),s._v("。看看你是否可以预测跟踪结果如何。当您使用参数 "),n("code",[s._v("-I IO_RUN_IMMEDIATE")]),s._v(" 与 "),n("code",[s._v("-I IO_RUN_LATER")]),s._v(" 时会发生什么？当您使用 "),n("code",[s._v("-S SWITCH_ON_IO")]),s._v(" 与 "),n("code",[s._v("-S SWITCH_ON_END")]),s._v(" 时会发生什么？")])]),s._v(" "),n("blockquote",[n("p",[s._v("设置随机种子，可以保证相同的种子生成的随机数都一样，会得到相同的随机数序列。针对问题中的50，则是有50%的机会进行CPU操作或者I/O操作。如果没有使用任何参数，则是正常的切换。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("❯ python process-run.py -s 1 -l 3:50,3:50 -c -p\nTime        PID: 0        PID: 1           CPU           IOs\n  1        RUN:cpu         READY             1          \n  2         RUN:io         READY             1          \n  3        BLOCKED       RUN:cpu             1             1\n  4        BLOCKED       RUN:cpu             1             1\n  5        BLOCKED       RUN:cpu             1             1\n  6        BLOCKED          DONE                           1\n  7        BLOCKED          DONE                           1\n  8*   RUN:io_done          DONE             1          \n  9         RUN:io          DONE             1          \n10        BLOCKED          DONE                           1\n11        BLOCKED          DONE                           1\n12        BLOCKED          DONE                           1\n13        BLOCKED          DONE                           1\n14        BLOCKED          DONE                           1\n15*   RUN:io_done          DONE             1          \n\nStats: Total Time 15\nStats: CPU Busy 8 (53.33%)\nStats: IO Busy  10 (66.67%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);