<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux用户和用户组教程 | Pursuit&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="随便写写">
    <meta name="keywords" content="python,Go,C++,git,github,markdown,database,mysql,redis">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.a3990aec.css" as="style"><link rel="preload" href="/assets/js/app.a4cafcca.js" as="script"><link rel="preload" href="/assets/js/4.71a85121.js" as="script"><link rel="preload" href="/assets/js/1.4a1189e9.js" as="script"><link rel="preload" href="/assets/js/3.bca043f9.js" as="script"><link rel="preload" href="/assets/js/98.5d2c4771.js" as="script"><link rel="preload" href="/assets/js/20.bc1029fc.js" as="script"><link rel="prefetch" href="/assets/js/10.ce2d8b4d.js"><link rel="prefetch" href="/assets/js/100.9d3b5dea.js"><link rel="prefetch" href="/assets/js/101.b86eda18.js"><link rel="prefetch" href="/assets/js/102.fbba1df1.js"><link rel="prefetch" href="/assets/js/103.442d7b87.js"><link rel="prefetch" href="/assets/js/104.3b47d5cd.js"><link rel="prefetch" href="/assets/js/105.4a3af62c.js"><link rel="prefetch" href="/assets/js/106.dd5be28c.js"><link rel="prefetch" href="/assets/js/107.b393fe94.js"><link rel="prefetch" href="/assets/js/108.622f1c8a.js"><link rel="prefetch" href="/assets/js/109.53ff4613.js"><link rel="prefetch" href="/assets/js/11.87208a0c.js"><link rel="prefetch" href="/assets/js/110.aea21341.js"><link rel="prefetch" href="/assets/js/111.226af18a.js"><link rel="prefetch" href="/assets/js/112.b71e5f65.js"><link rel="prefetch" href="/assets/js/113.5b4fb1b0.js"><link rel="prefetch" href="/assets/js/114.e5659c6e.js"><link rel="prefetch" href="/assets/js/115.dae78595.js"><link rel="prefetch" href="/assets/js/116.194b17e9.js"><link rel="prefetch" href="/assets/js/117.c1b0fcc9.js"><link rel="prefetch" href="/assets/js/118.40c88b6e.js"><link rel="prefetch" href="/assets/js/119.3b9adf84.js"><link rel="prefetch" href="/assets/js/12.7f5cceef.js"><link rel="prefetch" href="/assets/js/120.e2f9ce92.js"><link rel="prefetch" href="/assets/js/121.4c2bb93e.js"><link rel="prefetch" href="/assets/js/122.01481d6a.js"><link rel="prefetch" href="/assets/js/123.7c02c354.js"><link rel="prefetch" href="/assets/js/124.9ea581e6.js"><link rel="prefetch" href="/assets/js/125.251280ae.js"><link rel="prefetch" href="/assets/js/126.188cfa66.js"><link rel="prefetch" href="/assets/js/127.3f9835d2.js"><link rel="prefetch" href="/assets/js/128.ee85a236.js"><link rel="prefetch" href="/assets/js/129.0c7b9b6f.js"><link rel="prefetch" href="/assets/js/13.f2cea533.js"><link rel="prefetch" href="/assets/js/130.35e7f3c4.js"><link rel="prefetch" href="/assets/js/131.41099b54.js"><link rel="prefetch" href="/assets/js/132.de4f6d54.js"><link rel="prefetch" href="/assets/js/133.d12e0468.js"><link rel="prefetch" href="/assets/js/134.18b9667b.js"><link rel="prefetch" href="/assets/js/135.bb687966.js"><link rel="prefetch" href="/assets/js/136.7156cac9.js"><link rel="prefetch" href="/assets/js/137.4db14c28.js"><link rel="prefetch" href="/assets/js/138.65931aac.js"><link rel="prefetch" href="/assets/js/139.0714c9cd.js"><link rel="prefetch" href="/assets/js/14.f8459573.js"><link rel="prefetch" href="/assets/js/140.dd085b58.js"><link rel="prefetch" href="/assets/js/141.98f53cec.js"><link rel="prefetch" href="/assets/js/142.4549012c.js"><link rel="prefetch" href="/assets/js/143.6fbbebba.js"><link rel="prefetch" href="/assets/js/144.dd2d5e5b.js"><link rel="prefetch" href="/assets/js/145.4390f25d.js"><link rel="prefetch" href="/assets/js/146.f75866a2.js"><link rel="prefetch" href="/assets/js/147.ab840769.js"><link rel="prefetch" href="/assets/js/148.90e0c392.js"><link rel="prefetch" href="/assets/js/149.7adab08a.js"><link rel="prefetch" href="/assets/js/15.06cd6cc8.js"><link rel="prefetch" href="/assets/js/150.ff4a87f6.js"><link rel="prefetch" href="/assets/js/151.113c7c84.js"><link rel="prefetch" href="/assets/js/152.585469f6.js"><link rel="prefetch" href="/assets/js/153.f5a44313.js"><link rel="prefetch" href="/assets/js/154.37c411a2.js"><link rel="prefetch" href="/assets/js/155.19860040.js"><link rel="prefetch" href="/assets/js/156.0bab57ca.js"><link rel="prefetch" href="/assets/js/157.4b551a33.js"><link rel="prefetch" href="/assets/js/158.94c7f085.js"><link rel="prefetch" href="/assets/js/159.5c895d30.js"><link rel="prefetch" href="/assets/js/16.33942615.js"><link rel="prefetch" href="/assets/js/160.ac0c4752.js"><link rel="prefetch" href="/assets/js/161.99f2c4aa.js"><link rel="prefetch" href="/assets/js/162.fc374341.js"><link rel="prefetch" href="/assets/js/163.1aee8e27.js"><link rel="prefetch" href="/assets/js/164.a59a206d.js"><link rel="prefetch" href="/assets/js/165.311635f4.js"><link rel="prefetch" href="/assets/js/166.83c53b24.js"><link rel="prefetch" href="/assets/js/167.2f7573b7.js"><link rel="prefetch" href="/assets/js/168.c43b1559.js"><link rel="prefetch" href="/assets/js/169.c1c12666.js"><link rel="prefetch" href="/assets/js/17.da2e0126.js"><link rel="prefetch" href="/assets/js/170.58034e10.js"><link rel="prefetch" href="/assets/js/171.9ac74510.js"><link rel="prefetch" href="/assets/js/172.d2efe52a.js"><link rel="prefetch" href="/assets/js/173.c2b5351f.js"><link rel="prefetch" href="/assets/js/174.c7ad1108.js"><link rel="prefetch" href="/assets/js/175.f9c85086.js"><link rel="prefetch" href="/assets/js/18.a39b8ae2.js"><link rel="prefetch" href="/assets/js/19.1760f287.js"><link rel="prefetch" href="/assets/js/2.8e76b5b7.js"><link rel="prefetch" href="/assets/js/21.4b161474.js"><link rel="prefetch" href="/assets/js/22.69d29451.js"><link rel="prefetch" href="/assets/js/23.2a87052f.js"><link rel="prefetch" href="/assets/js/24.6beeaf9b.js"><link rel="prefetch" href="/assets/js/25.e9d4e312.js"><link rel="prefetch" href="/assets/js/26.c128f1d5.js"><link rel="prefetch" href="/assets/js/27.2bab9253.js"><link rel="prefetch" href="/assets/js/28.0b0ea581.js"><link rel="prefetch" href="/assets/js/29.71a2a1e9.js"><link rel="prefetch" href="/assets/js/30.11fd1987.js"><link rel="prefetch" href="/assets/js/31.92abb231.js"><link rel="prefetch" href="/assets/js/32.27d7c672.js"><link rel="prefetch" href="/assets/js/33.9f002fe8.js"><link rel="prefetch" href="/assets/js/34.39abd7b3.js"><link rel="prefetch" href="/assets/js/35.a54492ae.js"><link rel="prefetch" href="/assets/js/36.1b3ef370.js"><link rel="prefetch" href="/assets/js/37.3dda47b6.js"><link rel="prefetch" href="/assets/js/38.3dc3656a.js"><link rel="prefetch" href="/assets/js/39.78160c0e.js"><link rel="prefetch" href="/assets/js/40.382841f8.js"><link rel="prefetch" href="/assets/js/41.885f2f51.js"><link rel="prefetch" href="/assets/js/42.a794deca.js"><link rel="prefetch" href="/assets/js/43.bd06b1c5.js"><link rel="prefetch" href="/assets/js/44.c5b9fce0.js"><link rel="prefetch" href="/assets/js/45.8e169e05.js"><link rel="prefetch" href="/assets/js/46.907fb663.js"><link rel="prefetch" href="/assets/js/47.b494d092.js"><link rel="prefetch" href="/assets/js/48.7c4206ed.js"><link rel="prefetch" href="/assets/js/49.16bab940.js"><link rel="prefetch" href="/assets/js/5.780a742d.js"><link rel="prefetch" href="/assets/js/50.bf2afa43.js"><link rel="prefetch" href="/assets/js/51.2f2c49f7.js"><link rel="prefetch" href="/assets/js/52.0f01768d.js"><link rel="prefetch" href="/assets/js/53.572697e9.js"><link rel="prefetch" href="/assets/js/54.fc2487d6.js"><link rel="prefetch" href="/assets/js/55.e141f0c8.js"><link rel="prefetch" href="/assets/js/56.bf1d57b2.js"><link rel="prefetch" href="/assets/js/57.e1685918.js"><link rel="prefetch" href="/assets/js/58.686eb12e.js"><link rel="prefetch" href="/assets/js/59.16edb6bd.js"><link rel="prefetch" href="/assets/js/6.6c206683.js"><link rel="prefetch" href="/assets/js/60.b9d22ab4.js"><link rel="prefetch" href="/assets/js/61.c8057e71.js"><link rel="prefetch" href="/assets/js/62.a15c3ffa.js"><link rel="prefetch" href="/assets/js/63.f03ccc98.js"><link rel="prefetch" href="/assets/js/64.1de53088.js"><link rel="prefetch" href="/assets/js/65.1f66b952.js"><link rel="prefetch" href="/assets/js/66.8b91ec8b.js"><link rel="prefetch" href="/assets/js/67.3858f190.js"><link rel="prefetch" href="/assets/js/68.07d001e3.js"><link rel="prefetch" href="/assets/js/69.b5a9f3d3.js"><link rel="prefetch" href="/assets/js/7.03420b55.js"><link rel="prefetch" href="/assets/js/70.d651fd44.js"><link rel="prefetch" href="/assets/js/71.a2c312bf.js"><link rel="prefetch" href="/assets/js/72.0a8c31e9.js"><link rel="prefetch" href="/assets/js/73.ab26ecd6.js"><link rel="prefetch" href="/assets/js/74.48e511ca.js"><link rel="prefetch" href="/assets/js/75.1704aadb.js"><link rel="prefetch" href="/assets/js/76.f1d622b2.js"><link rel="prefetch" href="/assets/js/77.4d5c1e59.js"><link rel="prefetch" href="/assets/js/78.e06e8d1f.js"><link rel="prefetch" href="/assets/js/79.3bce4a31.js"><link rel="prefetch" href="/assets/js/80.6b49a79a.js"><link rel="prefetch" href="/assets/js/81.a4b9d26e.js"><link rel="prefetch" href="/assets/js/82.ccd1e9d5.js"><link rel="prefetch" href="/assets/js/83.cfaa864c.js"><link rel="prefetch" href="/assets/js/84.83bcbdae.js"><link rel="prefetch" href="/assets/js/85.582fcf12.js"><link rel="prefetch" href="/assets/js/86.05efc460.js"><link rel="prefetch" href="/assets/js/87.de10c1c1.js"><link rel="prefetch" href="/assets/js/88.9b0041ab.js"><link rel="prefetch" href="/assets/js/89.b3dd7b39.js"><link rel="prefetch" href="/assets/js/90.5eb5278e.js"><link rel="prefetch" href="/assets/js/91.f9bf3224.js"><link rel="prefetch" href="/assets/js/92.a91417ac.js"><link rel="prefetch" href="/assets/js/93.646a8bd6.js"><link rel="prefetch" href="/assets/js/94.d73a6ca8.js"><link rel="prefetch" href="/assets/js/95.d66d21d7.js"><link rel="prefetch" href="/assets/js/96.eae32c34.js"><link rel="prefetch" href="/assets/js/97.5ab28e6e.js"><link rel="prefetch" href="/assets/js/99.c8009418.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.caeb3b49.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a3990aec.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpeg" alt="Pursuit's blog" class="logo"> <span class="site-name can-hide">Pursuit's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/develop/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/develop/language/" class="nav-link">编程语言</a></li><li class="dropdown-item"><!----> <a href="/develop/framework/" class="nav-link">开发框架</a></li><li class="dropdown-item"><!----> <a href="/develop/algorithm/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/develop/storage/" class="nav-link">数据存储</a></li><li class="dropdown-item"><!----> <a href="/develop/system/" class="nav-link">系统架构</a></li><li class="dropdown-item"><!----> <a href="/develop/network/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/develop/cloud/" class="nav-link">云原生</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/vcs/" class="nav-link">版本控制</a></li><li class="dropdown-item"><!----> <a href="/tool/network/" class="nav-link">网络工具</a></li><li class="dropdown-item"><!----> <a href="/tool/develop/" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><a href="/note/" class="link-title">学习笔记</a> <span class="title" style="display:none;">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/paper/" class="nav-link">学术搬砖</a></li><li class="dropdown-item"><!----> <a href="/note/project/" class="nav-link">实践项目</a></li><li class="dropdown-item"><!----> <a href="/note/lecture/" class="nav-link">讲座研讨</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活杂谈" class="dropdown-title"><a href="/life/" class="link-title">生活杂谈</a> <span class="title" style="display:none;">生活杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/life/year/" class="nav-link">随写编年</a></li><li class="dropdown-item"><!----> <a href="/life/youth/" class="nav-link">追忆青春</a></li><li class="dropdown-item"><!----> <a href="/life/travel/" class="nav-link">旅行日记</a></li><li class="dropdown-item"><!----> <a href="/life/art/" class="nav-link">文艺时光</a></li><li class="dropdown-item"><!----> <a href="/life/cook/" class="nav-link">烹调分享</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源收藏" class="dropdown-title"><a href="/resource/" class="link-title">资源收藏</a> <span class="title" style="display:none;">资源收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resource/website/" class="nav-link">实用网站</a></li><li class="dropdown-item"><!----> <a href="/resource/project/" class="nav-link">优秀项目</a></li><li class="dropdown-item"><!----> <a href="/resource/study/" class="nav-link">学习资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/more/tip/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/more/blog/" class="nav-link">博客相关</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friend/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/unique-pure/my-vdoing-blog-template" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.jpeg"> <div class="blogger-info"><h3>Pursuit</h3> <span>但行好事，莫问前程</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/develop/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/develop/language/" class="nav-link">编程语言</a></li><li class="dropdown-item"><!----> <a href="/develop/framework/" class="nav-link">开发框架</a></li><li class="dropdown-item"><!----> <a href="/develop/algorithm/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/develop/storage/" class="nav-link">数据存储</a></li><li class="dropdown-item"><!----> <a href="/develop/system/" class="nav-link">系统架构</a></li><li class="dropdown-item"><!----> <a href="/develop/network/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/develop/cloud/" class="nav-link">云原生</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/vcs/" class="nav-link">版本控制</a></li><li class="dropdown-item"><!----> <a href="/tool/network/" class="nav-link">网络工具</a></li><li class="dropdown-item"><!----> <a href="/tool/develop/" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><a href="/note/" class="link-title">学习笔记</a> <span class="title" style="display:none;">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/paper/" class="nav-link">学术搬砖</a></li><li class="dropdown-item"><!----> <a href="/note/project/" class="nav-link">实践项目</a></li><li class="dropdown-item"><!----> <a href="/note/lecture/" class="nav-link">讲座研讨</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活杂谈" class="dropdown-title"><a href="/life/" class="link-title">生活杂谈</a> <span class="title" style="display:none;">生活杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/life/year/" class="nav-link">随写编年</a></li><li class="dropdown-item"><!----> <a href="/life/youth/" class="nav-link">追忆青春</a></li><li class="dropdown-item"><!----> <a href="/life/travel/" class="nav-link">旅行日记</a></li><li class="dropdown-item"><!----> <a href="/life/art/" class="nav-link">文艺时光</a></li><li class="dropdown-item"><!----> <a href="/life/cook/" class="nav-link">烹调分享</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源收藏" class="dropdown-title"><a href="/resource/" class="link-title">资源收藏</a> <span class="title" style="display:none;">资源收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resource/website/" class="nav-link">实用网站</a></li><li class="dropdown-item"><!----> <a href="/resource/project/" class="nav-link">优秀项目</a></li><li class="dropdown-item"><!----> <a href="/resource/study/" class="nav-link">学习资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/more/tip/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/more/blog/" class="nav-link">博客相关</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friend/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/unique-pure/my-vdoing-blog-template" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程语言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据存储</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>系统架构</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/d66bf9/" class="sidebar-link">Linux常用命令、管道、环境变量</a></li><li><a href="/pages/b04f81/" class="sidebar-link">Linux常用文件管理命令</a></li><li><a href="/pages/419777/" aria-current="page" class="active sidebar-link">Linux用户和用户组教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/419777/#_1-用户和用户组介绍" class="sidebar-link">1 用户和用户组介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/419777/#_1-1-用户" class="sidebar-link">1.1 用户</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_1-2-用户组" class="sidebar-link">1.2 用户组</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_1-3-文件权限" class="sidebar-link">1.3 文件权限</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_1-3-1-文件所有者-user" class="sidebar-link">1.3.1 文件所有者（User）</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_1-3-2-用户组成员-group" class="sidebar-link">1.3.2 用户组成员（Group）</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_1-3-3-其他人-others" class="sidebar-link">1.3.3 其他人（Others）</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_1-3-4-超级管理员-root" class="sidebar-link">1.3.4 超级管理员（root）</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_1-4-aaa基础" class="sidebar-link">1.4 AAA基础</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/419777/#_2-用户和用户组文件" class="sidebar-link">2 用户和用户组文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/419777/#_2-1-用户账号文件-etc-passwd" class="sidebar-link">2.1 用户账号文件— /etc/passwd</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_2-2-用户影子文件-etc-shadow" class="sidebar-link">2.2 用户影子文件—/etc/shadow</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_2-3-创建用户的默认设置文件-etc-login-defs" class="sidebar-link">2.3 创建用户的默认设置文件—/etc/login.defs</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_2-4-用户组账号文件-etc-group" class="sidebar-link">2.4 用户组账号文件—/etc/group</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_2-5-用户组影子文件-etc-gshadow" class="sidebar-link">2.5 用户组影子文件—/etc/gshadow</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/419777/#_3-用户和用户组管理" class="sidebar-link">3 用户和用户组管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/419777/#_3-1-用户管理" class="sidebar-link">3.1 用户管理</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_3-1-1-使用useradd命令添加用户" class="sidebar-link">3.1.1 使用useradd命令添加用户</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_3-1-2-使用usermod命令修改用户信息" class="sidebar-link">3.1.2 使用usermod命令修改用户信息</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_3-1-3-使用userdel命令删除用户" class="sidebar-link">3.1.3 使用userdel命令删除用户</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_3-1-4-使用passwd命令管理用户口令" class="sidebar-link">3.1.4 使用passwd命令管理用户口令</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_3-2-用户组管理" class="sidebar-link">3.2 用户组管理</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_3-2-1-使用groupadd命令创建用户组" class="sidebar-link">3.2.1 使用groupadd命令创建用户组</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_3-2-2-使用groupmod修改" class="sidebar-link">3.2.2 使用groupmod修改</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_3-2-3-使用groupdel命令删除用户组" class="sidebar-link">3.2.3 使用groupdel命令删除用户组</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_3-2-4-使用gpasswd命令管理用户组" class="sidebar-link">3.2.4 使用gpasswd命令管理用户组</a></li><li class="sidebar-sub-header level4"><a href="/pages/419777/#_3-2-5-使用newgrp命令切换用户的有效组" class="sidebar-link">3.2.5 使用newgrp命令切换用户的有效组</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/419777/#_4-其他相关命令" class="sidebar-link">4 其他相关命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/419777/#_4-1-id命令查看用户的uid和gid" class="sidebar-link">4.1 id命令查看用户的UID和GID</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_4-2-su命令临时切换用户身份" class="sidebar-link">4.2 su命令临时切换用户身份</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_4-3-whoami和who-am-i命令" class="sidebar-link">4.3 whoami和who am i命令</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_4-4-users和groups命令" class="sidebar-link">4.4 users和groups命令</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/419777/#_5-高级操作示例" class="sidebar-link">5 高级操作示例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/419777/#_5-1-通过更改用户和组的配置文件-直接添加或修改用户和组" class="sidebar-link">5.1 通过更改用户和组的配置文件，直接添加或修改用户和组</a></li><li class="sidebar-sub-header level3"><a href="/pages/419777/#_5-2-linux批量添加用户" class="sidebar-link">5.2 Linux批量添加用户</a></li></ul></li></ul></li><li><a href="/pages/64b48d/" class="sidebar-link">Linux 系统调用函数fork、vfork、clone详解</a></li><li><a href="/pages/d8622e/" class="sidebar-link">Linux execve函数详解</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>操作系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>分布式系统</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>云原生</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/develop/#开发" data-v-06225672>开发</a></li><li data-v-06225672><a href="/develop/#系统架构" data-v-06225672>系统架构</a></li><li data-v-06225672><a href="/develop/#Linux" data-v-06225672>Linux</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/unique-pure" target="_blank" title="作者" class="beLink" data-v-06225672>Pursuit</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-05-24</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Linux用户和用户组教程<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="_1-用户和用户组介绍"><a href="#_1-用户和用户组介绍" class="header-anchor">#</a> 1 用户和用户组介绍</h2> <h3 id="_1-1-用户"><a href="#_1-1-用户" class="header-anchor">#</a> 1.1 用户</h3> <p>任何操作系统都存在“用户”的概念，Linux也不例外。Linux系统是一个多用户多任务的分时操作系统，<font color="red">即Linux系统支持多个用户在同一时间内登录，不同用户可以执行不同的任务，并且互不影响。</font>每个用户账号都拥有一个用户名和各自的口令（即密码）。在登录系统时，只有正确输入用户名和密码，才能进入系统和自己的主目录。</p> <p>在Linux中，用户分为两大类、三小类：分别为<strong>系统管理员</strong>（一般为root）和<strong>普通用户</strong> 。普通用户中，又划分为两类，分别为系统用户和登录用户。</p> <ul><li><strong>系统管理员</strong>：即超级管理员，可以操作系统中任意文件和命令，拥有最高的管理权限。</li> <li><strong>普通用户</strong> <ul><li>登录用户：为管理员手动添加的用户，<font color="red">默认仅拥有操作自身家目录中文件及目录的权限，以及进入与浏览相关目录文件的权限（如/etc、/var/log等），但没有创建、修改、删除等权限。</font></li> <li>系统用户：一般为系统安装后默认存在的，且默认情况下不能登录系统，它们的存在主要是为了满足系统进程对文件属主的需求。
Tips：在部署某些服务是，也可以手动添加某些系统用户。</li></ul></li></ul> <p>Linux系统使用UID（User ID）来标识不同用户，说白了，其实Linux并不认识你的用户名称，它只认识用户名对应的UID。其中UID是16bit的二进制数字，所以换算成十进制，UID的范围是0~65535，Linux根据用户类别，对UID划分做了规定：</p> <ul><li>0（系统管理员）：，当UID是0时，代表这个用户为超级管理员，所以当你想要其他的用户也有root权限时，将该用户的UID改为0即可。<font color="red">但一般来说，用户的UID应当是独一无二的，其他用户不应当有相同的UID数值，只有UID等于0时可以例外。</font></li> <li>1~499（系统账号）：该范围内的UID是保留给系统使用的 ID，其实 1~65534 之间的账号并没有不同， 也就是除了 0 之外，其它的 UID 并没有不一样，预设 500 以下给系统作为保留账号只是一个习惯。这样的好处是，以有名的 DNS 服务器的启动服务『 named 』为例，这个程序的预设所有人 named 的账号 UID 是 25 ，当你自定义的账号也是 25 时，会造成系统冲突！为了杜绝这样的问题，养成好习惯，保留 500 以前的 UID 给系统使用！<font color="red"> 一般来说， 1到99 会保留给系统预设的账号，另外 100~499 则保留给一些服务来使用。</font></li> <li>500~65535（登录用户）：给一般使用者用的。事实上，目前的 linux 核心 (2.6.x 版)已经可以支持到 4294967295 (2^32-1) 这么大的 UID 号码。</li></ul> <h3 id="_1-2-用户组"><a href="#_1-2-用户组" class="header-anchor">#</a> 1.2 用户组</h3> <p>用户组是具有相同特征用户的逻辑集合。简单的理解，有时我们需要让多个用户具有相同的权限，比如查看、修改某一个文件的权限，一种方法是分别对多个用户进行文件访问授权，如果有 10 个用户的话，就需要授权 10 次，那如果有 100、1000 甚至更多的用户呢？</p> <p>显然，这种方法不太合理。最好的方式是建立一个组，让这个组具有查看、修改此文件的权限，然后将所有需要访问此文件的用户放入这个组中。那么，所有用户就具有了和组一样的权限，这就是用户组。<font color="red">将用户分组是 Linux 系统中对用户进行管理及控制访问权限的一种手段，通过定义用户组，很多程序上简化了对用户的管理工作。</font></p> <p>Linux对用户组也有三种划分方式：</p> <ul><li><p>第一种组类别</p> <ul><li>管理员组</li> <li>普通用户组（包括系统用户组和登录用户组）</li></ul></li> <li><p>第二种组类别</p> <ul><li>用户的基本组（主组）：用户必须有且只能有一个基本组。</li> <li>用户的附加组  （附属组）：用户可以有0个、1个或多个附加组。</li></ul> <p>基本组和附加组就比如，每个人有一个用来安家的房子（基本组），还可以有N个用于投资的房子（附属组）。</p></li> <li><p>第三种组类别</p> <ul><li>私有组：每新建一个用户，如果不指定-g参数，都会自动创建一个和用户名同名的组，且组内只包含用户本身。</li></ul> <ul><li>公共组：组内可包含多个用户。</li></ul></li></ul> <p>Linux系统也是使用GID（Group ID）来标识不同组。用户和用户组的对应关系有以下 4 种：</p> <ol><li>一对一：一个用户可以存在一个组中，是组中的唯一成员；</li> <li>一对多：一个用户可以存在多个用户组中，此用户具有这多个组的共同权限；</li> <li>多对一：多个用户可以存在一个组中，这些用户具有和组相同的权限；</li> <li>多对多：多个用户可以存在多个组中，也就是以上 3 种关系的扩展。</li></ol> <p>下图形象的表示了用户和用户组的4种对应关系。
<img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/2ab64ef22dfa44d29b2760570e2a8870-20231125214644832.png" alt="在这里插入图片描述"></p> <p><font color="red">注意：每一个用户组也有一个口令，当我们将用户添加到指定组时需要该用户组的密码。</font></p> <h3 id="_1-3-文件权限"><a href="#_1-3-文件权限" class="header-anchor">#</a> 1.3 文件权限</h3> <p>在Linux操作系统中，任何文件都归属于某一特定的用户，其作为多用户系统，如何区分不同用户对文件的权限成了不可避免的问题。例如，小 A 希望个人文件不被其他用户读取，而如果不对文件进行权限设置，共享了主机资源的小 B 也可以读取小 A 的个人文件，这是不合理的，不同用户对不同文件所拥有的权限应该不尽相同。</p> <p>因此，Linux 以 “用户与用户组” 的概念，建立用户与文件权限之间的联系，保证系统能够充分考虑每个用户的隐私保护，很大程度上保障了 Linux 作为多用户系统的可行性。<font color="red">从文件权限的角度出发，“用户与用户组” 引申为三个具体的对象——<strong>文件所有者</strong>、<strong>用户组成员</strong>、<strong>其他人</strong>。每一个对象对某一个文件的持有权限是不同的。</font></p> <h4 id="_1-3-1-文件所有者-user"><a href="#_1-3-1-文件所有者-user" class="header-anchor">#</a> 1.3.1 文件所有者（User）</h4> <p>当一个用户创建了一个文件，这个用户就是这个文件的文件所有者。文件所有者对文件拥有最高权限，除非文件所有者开放权限，否则其他人无法对文件执行查看、修改等操作。**这也是 Linux 系统能够保护用户隐私的最关键的原因。**在文件所有者占有文件之后，需要文件所有者对其他用户开放权限，其他用户才能查看、修改文件。</p> <p>如果仅区分 “文件所有者” 和 “其他用户”，那么文件所有者对其他用户开放权限后，所有其他用户均能查看、修改文件。但是，若文件所有者希望仅对部分用户开放，那么仅仅区分 “用户所有者” 和 “其他用户” 显然不满足需求。这就引入了 “用户组的概念”。</p> <h4 id="_1-3-2-用户组成员-group"><a href="#_1-3-2-用户组成员-group" class="header-anchor">#</a> 1.3.2 用户组成员（Group）</h4> <p>将 “其他用户” 区分为用户组成员和其他人后，若文件所有者希望对部分用户开放权限，而对其他人继续保持私有，则只需要将这部分用户与文件所有者划入一个用户组。这样，这部分用户就成了与文件所有者同组的用户组成员。<font color="red">用户可以对用户组成员开放文件权限，用户组成员则具备了查看、修改文件的权限，而对其他无关用户保持私有。</font></p> <p>用户组成员在团队开发中非常有帮助。例如，团队成员之间保持文件资源共享，但对非团队成员保持私有，这就需要将文件所有者与团队成员用户划分为同一个用户组，再对用户组成员开放权限即可。</p> <p>需要注意的是，<strong>一个用户可在多个用户组中</strong>。</p> <h4 id="_1-3-3-其他人-others"><a href="#_1-3-3-其他人-others" class="header-anchor">#</a> 1.3.3 其他人（Others）</h4> <p>顾名思义，就是与文件所有者没有任何联系的用户，即不是文件所有者也不是所在文件所属用户组。</p> <h3 id="_1-3-4-超级管理员-root"><a href="#_1-3-4-超级管理员-root" class="header-anchor">#</a> 1.3.4 超级管理员（root）</h3> <p>由于Linux系统中，root具有最高权限，可以执行任何想要执行的操作，也正因为如此，处于安全考虑，一般情况下不推荐使用 root 用户进行日常使用。root 用户所在的用户组称为 “root组”，处于 root 组的普通用户，能够通过 sudo 命令获取 root 权限，即我们是可以通过sudo权限来操作文件的。</p> <h3 id="_1-4-aaa基础"><a href="#_1-4-aaa基础" class="header-anchor">#</a> 1.4 AAA基础</h3> <p>AAA指的是Authentication、Authorization、Accounting，即认证、授权和审计。</p> <ul><li>认证：验证用户是否可以获得权限，是AAA的第一步，即验证身份；</li> <li>授权：授权用户可以使用那些服务或资源，即身份验证成功后，赋予这个身份相应的权限；</li> <li>审计：记录用户的操作情况，在Linux中，日志就是审计的一种手段。</li></ul> <p>Linux的用户和组管理可以说是基于AAA进行的，首先用户登录输入用户名密码，就是认证的过程；其次，在用户登录成功后，所拥有的权限各不相同，这就是</p> <p>授权；最后，用户的操作历史会记录在日志中，这是审计。</p> <h2 id="_2-用户和用户组文件"><a href="#_2-用户和用户组文件" class="header-anchor">#</a> 2 用户和用户组文件</h2> <h3 id="_2-1-用户账号文件-etc-passwd"><a href="#_2-1-用户账号文件-etc-passwd" class="header-anchor">#</a> 2.1 用户账号文件— /etc/passwd</h3> <p><code>/etc/passwd</code>文件是Linux系统安全的关键文件之一，只有系统管理员才可以修改此文件。该文件用于用户登录等操作时校验用户的登录名、加密的口令数据项、用户ID（UID）、默认的用户组ID（GID）、用户信息、用户主目录及登录后使用的shell。该文件种每一行保存一个用户的资料，而用户数据按域以冒号':'分割。格式如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>username:password:uid:gid:userinfo:home:shell
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>具体含义如表所示。</p> <table><thead><tr><th style="text-align:center;">域</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">username</td> <td style="text-align:center;">登录名</td></tr> <tr><td style="text-align:center;">password</td> <td style="text-align:center;">加密的用户口令</td></tr> <tr><td style="text-align:center;">uid</td> <td style="text-align:center;">用户ID</td></tr> <tr><td style="text-align:center;">gid</td> <td style="text-align:center;">用户组ID</td></tr> <tr><td style="text-align:center;">userinfo</td> <td style="text-align:center;">用户信息</td></tr> <tr><td style="text-align:center;">home</td> <td style="text-align:center;">分配给用户的主目录</td></tr> <tr><td style="text-align:center;">shell</td> <td style="text-align:center;">用户登录后将执行的shell（若为空格泽默认为“/bin/sh”）</td></tr></tbody></table> <p>其中关于用户主目录，每个用户都需要保存专属于自己的配置文件及其他文档，这是以免用户间相互干扰。除root账户外（root账户的主目录为&quot;/root&quot;），大多数Linux默认将用户主目录安置在&quot;/home&quot;目录下，并把每个用户的主目录命名为其上机使用的登录名。</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/842dc2752e8996482acbbf0c83c50545.png" alt="image-20220503204800893"></p> <p>如图，acs的登录主目录为&quot;/home/acs&quot;。通常，“~”被指向当前用户的登录子目录。</p> <p><font color="red">注意：用户主目录被安排在“/home”下完全是认为决定的。系统并不关心我们到底把用户主目录安排在什么地方，因为每个用户的位置是在账号文件中定义说明的。所以，用户可以自行调整，灵活使用</font></p> <p>关于shell，Shell是用户与Linux系统之间的接口。Linux的Shell有许多种，每种都有不同的特点。当用户登录进入系统时，会启动一个Shell程序，默认是bash。系统管理员可以根据系统情况和用户习惯为用户指定某个Shell。如果不指定Shell，那么系统使用bash为默认的登录Shell，即这个字段的值为/bin/bash。用户的登录Shell也可以指定为某个特定的程序（此程序不是一个命令解释器）。</p> <p>我们通过查看<code>/etc/passwd</code>文件，可以得到如下完整的系统账号文件。</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/62794c219ba89bdea97a4871ac63f61e.png" alt="image-20220503205339447"></p> <p>我们发现，第二列都为x。我们可以继续往下看。</p> <h3 id="_2-2-用户影子文件-etc-shadow"><a href="#_2-2-用户影子文件-etc-shadow" class="header-anchor">#</a> 2.2 用户影子文件—/etc/shadow</h3> <p>实际上，Linxu使用不可逆的加密算法（如MD5）来加密口令，由于加密算法是不可逆的，所以黑客从密文是得不到明文的。但<code>/etc/passwd</code>文件时全局可读的，且加密的算法是公开的，如果在passwd中显示密文，黑客据此可以破解口令。Linux系统目前广泛采用了“shadow（影子）文件”机制。将加密的口令转移到“/etc/shadow”文件中。<code>/etc/shadow</code>文件只为root超级用户可读，而相应的<code>etc/passwd</code>文件的密文域泽显示为一个x，从而最大限度地减少了密文泄露的机会。x表示该账户需要密码才能登录，为空时，账户无须密码即可登录。</p> <p>和<code>/etc/passwd</code>类似，<code>/etc/shadow</code>文件中每条记录用冒号“：”分隔，形成9个域，格式如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>username:password:lastchg:min:max:warn:inactive:expire:flag
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th style="text-align:center;">域</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">username</td> <td style="text-align:center;">用户登陆名</td></tr> <tr><td style="text-align:center;">password</td> <td style="text-align:center;">加密的用户口令</td></tr> <tr><td style="text-align:center;">lastchg</td> <td style="text-align:center;">表示从1970年1月1日起到上次修改口令所经过的天数</td></tr> <tr><td style="text-align:center;">min</td> <td style="text-align:center;">表示两次修改口令之间至少经过的天数</td></tr> <tr><td style="text-align:center;">max</td> <td style="text-align:center;">表示口令还会有效的最大天数，如果是99999则表示永不过期</td></tr> <tr><td style="text-align:center;">warn</td> <td style="text-align:center;">表示口令失效前多少天内系统向用户发出警告</td></tr> <tr><td style="text-align:center;">inactive</td> <td style="text-align:center;">表示禁止登录前用户名还有效的天数</td></tr> <tr><td style="text-align:center;">expire</td> <td style="text-align:center;">表示用户被禁止登录的时间</td></tr> <tr><td style="text-align:center;">flag</td> <td style="text-align:center;">保留域，暂未使用</td></tr></tbody></table> <p>下图为系统中实际影子文件的例子。</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/6d4cb873977925e048a456514530a915-20231125214650485.png" alt="image-20220503210639011"></p> <h3 id="_2-3-创建用户的默认设置文件-etc-login-defs"><a href="#_2-3-创建用户的默认设置文件-etc-login-defs" class="header-anchor">#</a> 2.3 创建用户的默认设置文件—/etc/login.defs</h3> <p>/etc/login.defs 文件用于在创建用户时，对用户的一些基本属性做默认设置，例如指定用户 UID 和 GID 的范围，用户的过期时间，密码的最大长度，等等。</p> <p><font color="red">需要注意的是，该文件的用户默认配置对 root 用户无效。并且，当此文件中的配置与 /etc/passwd 和 /etc/shadow 文件中的用户信息有冲突时，系统会以/etc/passwd 和 /etc/shadow 为准。</font></p> <p>其中设置项含义如下表所示。</p> <table><thead><tr><th style="text-align:center;">设置项</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">MAIL_DIR /var/spool/mail</td> <td style="text-align:center;">创建用户时，系统会在目录 /var/spool/mail 中创建一个用户邮箱，比如 lamp 用户的邮箱是 /var/spool/mail/lamp。</td></tr> <tr><td style="text-align:center;">PASS_MAX_DAYS 99999</td> <td style="text-align:center;">密码有效期，99999 是自 1970 年 1 月 1 日起密码有效的天数，相当于 273 年，可理解为密码始终有效。</td></tr> <tr><td style="text-align:center;">PASS_MIN_DAYS 0</td> <td style="text-align:center;">表示自上次修改密码以来，最少隔多少天后用户才能再次修改密码，默认值是 0。</td></tr> <tr><td style="text-align:center;">PASS_MIN_LEN 5</td> <td style="text-align:center;">指定密码的最小长度，默认不小于 5 位，但是现在用户登录时验证已经被 PAM 模块取代，所以这个选项并不生效。</td></tr> <tr><td style="text-align:center;">PASS_WARN_AGE 7</td> <td style="text-align:center;">指定在密码到期前多少天，系统就开始通过用户密码即将到期，默认为 7 天。</td></tr> <tr><td style="text-align:center;">UID_MIN 500</td> <td style="text-align:center;">指定最小 UID 为 500，也就是说，添加用户时，默认 UID 从 500 开始。注意，如果手工指定了一个用户的 UID 是 550，那么下一个创建的用户的 UID 就会从 551 开始，哪怕 500~549 之间的 UID 没有使用。</td></tr> <tr><td style="text-align:center;">UID_MAX 60000</td> <td style="text-align:center;">指定用户最大的 UID 为 60000。</td></tr> <tr><td style="text-align:center;">GID_MIN 500</td> <td style="text-align:center;">指定最小 GID 为 500，也就是在添加组时，组的 GID 从 500 开始。</td></tr> <tr><td style="text-align:center;">GID_MAX 60000</td> <td style="text-align:center;">用户 GID 最大为 60000。</td></tr> <tr><td style="text-align:center;">CREATE_HOME yes</td> <td style="text-align:center;">指定在创建用户时，是否同时创建用户主目录，yes 表示创建，no 则不创建，默认是 yes。</td></tr> <tr><td style="text-align:center;">UMASK 077</td> <td style="text-align:center;">用户主目录的权限默认设置为 077。</td></tr> <tr><td style="text-align:center;">USERGROUPS_ENAB yes</td> <td style="text-align:center;">指定删除用户的时候是否同时删除用户组，准备地说，这里指的是删除用户的初始组，此项的默认值为 yes。</td></tr> <tr><td style="text-align:center;">ENCRYPT_METHOD SHA512</td> <td style="text-align:center;">指定用户密码采用的加密规则，默认采用 SHA512，这是新的密码加密模式，原先的 Linux 只能用 DES 或 MD5 加密。</td></tr></tbody></table> <p>如果我们想修改默认配置即可修改配置项的值即可。</p> <h3 id="_2-4-用户组账号文件-etc-group"><a href="#_2-4-用户组账号文件-etc-group" class="header-anchor">#</a> 2.4 用户组账号文件—/etc/group</h3> <p>我们知道，<code>/etc/passwd</code>文件中包含着每个用户的用户组ID（GID），但如果我们需要找一个用户组中的所有用户，通过<code>/etc/passwd</code>难免有些复杂，需要从头到尾寻找同组用户。而<code>/etc/group</code>文件包含关于用户组信息，GID被映射到用户分组的名称及同一分组中的其他成员，这样找同组用户以及配置用户组就方便了许多。<code>/etc/group</code>文件对用户组的许可权限的控制并不是必要的，这是因为Linux系统用来自于<code>/etc/passwd</code>文件的UID、GID来决定文件存取权限。即使<code>/etc/group</code>文件不存在于系统中，具有相同的GID用户也能以用户组的许可权限共享文件。</p> <p><code>/etc/group</code>文件记录格式如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>group_name:group_password:group_id:group_members
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中，各个域的含义如下表。</p> <table><thead><tr><th>域</th> <th>含义</th></tr></thead> <tbody><tr><td>group_name</td> <td>用户组名</td></tr> <tr><td>group_password</td> <td>加密后的用户组口令</td></tr> <tr><td>group_id</td> <td>用户组ID（GID）</td></tr> <tr><td>group_members</td> <td>以逗号分隔的成员用户清单</td></tr></tbody></table> <p>以下是一个<code>/etc/group</code>文件的实例。</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/ea98544d0c79f65fa03cec6026358ae3-20231125214657037.png" alt="image-20220503212923479"></p> <h3 id="_2-5-用户组影子文件-etc-gshadow"><a href="#_2-5-用户组影子文件-etc-gshadow" class="header-anchor">#</a> 2.5 用户组影子文件—/etc/gshadow</h3> <p>和用户账号文件passwd一样，为了应对黑客对其进行的暴力攻击，用户组文件也采用一种将组口令与组的其他信息相分离的安全机制——gshadow。<code>/etc/shadow</code>文件记录格式如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>group_name:group_password:group_members
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中，各个域的含义如下表。</p> <table><thead><tr><th style="text-align:center;">域</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">group_name</td> <td style="text-align:center;">用户组名</td></tr> <tr><td style="text-align:center;">group_password</td> <td style="text-align:center;">加密后的用户组口令</td></tr> <tr><td style="text-align:center;">group_members</td> <td style="text-align:center;">以逗号分隔的成员用户清单</td></tr></tbody></table> <h2 id="_3-用户和用户组管理"><a href="#_3-用户和用户组管理" class="header-anchor">#</a> 3 用户和用户组管理</h2> <h3 id="_3-1-用户管理"><a href="#_3-1-用户管理" class="header-anchor">#</a> 3.1 用户管理</h3> <h4 id="_3-1-1-使用useradd命令添加用户"><a href="#_3-1-1-使用useradd命令添加用户" class="header-anchor">#</a> 3.1.1 使用useradd命令添加用户</h4> <p>Linux使用useradd命令添加用户或更新新创建用户的默认信息。其命令格式如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>useradd [option] username
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可使用的选项如下：</p> <ul><li><code>-c comment</code>：描述新用户账号，通常为用户全名。</li> <li><code>-d home_dir</code>：设置用户主目录。默认值为用户的登录名，并放在&quot;/home&quot;目录下。</li> <li><code>-g group</code>：指定用户所属的基本组。</li> <li><code>-G group</code>：指定用户所属的附加组。</li> <li><code>-u uid</code>：设置用户的ID。</li> <li><code>-s shell类型</code>：设定用户使用的登录shell类型。</li> <li><code>-k dir</code>：设置框架目录，创建用户时该目录下的文件都被复制到主目录。</li> <li><code>-e expire_date</code>：设置账号过期时间。</li> <li><code>-f inactivity</code>：设置口令失效时间。</li> <li><code>-n</code>：不为用户创建私有用户组。</li> <li><code>-p password</code>：为新建用户指定登录密码。此处的 password 是对应登录密码经 MD5 加密后所得到的密码值，不是真实密码原文，因此在实际应用中，该参数选项使用较少，通常单独使用 passwd 命令来为用户设置登录密码。</li> <li><code>-r</code>：创建一个用户 ID 小于 500 的系统账户，默认不创建对应的主目录。</li> <li><code>-m</code>：若主目录不存在，则创建它。通常与<code>-r</code>结合，可为系统用户主目录。</li> <li><code>-M</code>：不创建主目录。</li></ul> <p>实例1：创建一个普通用户，名为hzf，其中uid为6666，用户主目录指定在/hzf/。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">useradd</span> <span class="token parameter variable">-u</span> <span class="token number">6666</span> <span class="token parameter variable">-d</span> /hzf/ hzf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例2：创建一个系统账户，名为mysystem，其中为系统用户创建主目录，指定密码为12345678</p> <blockquote><p>首先需要加密密码串，这里使用md5sum工具。</p> <p>利用md5sum加密字符串的方法</p> <p># md5sum     //然后回车</p> <p>12345678      //输入12345678，然后按两次ctrl+d。</p> <p>这个时候就会得到一串密文。</p> <p>使用以下命令即可创建该系统用户</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>useradd -r -m -p 1234567825d55ad283aa400af464c76d713c07ad mysystem
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <p>查看<code>/etc/passwd</code>即可看到我们创建得用户信息。</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/99982b32e60cffbb552501758e033046.png" alt="image-20220504142637032"></p> <h4 id="_3-1-2-使用usermod命令修改用户信息"><a href="#_3-1-2-使用usermod命令修改用户信息" class="header-anchor">#</a> 3.1.2 使用usermod命令修改用户信息</h4> <p>对于已创建好的用户，可使用 usermod 命令来修改和设置账户的各项属性，包括登录名，主目录，用户组，登录 shell 等，该命令格式如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>usermod [option] username
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>常用的选项包括<code>-c, -d, -m, -g, -G, -s, -u以及-o等</code>，这些选项的意义与<code>useradd</code>命令中的选项一样，可以为用户指定新的资源值。</p> <p>另外，有些系统还可以使用<code>-l</code>修改用户名。用法为：<code>usermod -l newusername</code></p> <p>使用<code>-L</code>可以锁定用户账号，临时禁止用户登录。用法为：<code>usermod -L username</code>，Linux锁定用户，是通过在密码文件 shadow 的密码字段前加 “！” 来标识该用户被锁定。</p> <p>但如果我们是用root用户登录，再用<code>su</code>命令切换到被锁定的账号是可以进去的。</p> <p>使用<code>-U</code>可以解锁用户账号。用法为：<code>usermod -U username</code>。</p> <h4 id="_3-1-3-使用userdel命令删除用户"><a href="#_3-1-3-使用userdel命令删除用户" class="header-anchor">#</a> 3.1.3 使用userdel命令删除用户</h4> <p>要删除用户，可以使用userdel命令删除，命令格式如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>userdel [-r] username
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中<code>-r</code>参数可选，若带上参数，表示在删除账户的同时，一并删除用户的主目录。</p> <h4 id="_3-1-4-使用passwd命令管理用户口令"><a href="#_3-1-4-使用passwd命令管理用户口令" class="header-anchor">#</a> 3.1.4 使用passwd命令管理用户口令</h4> <p>用户管理的一项重要内容是用户口令的管理。用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用，即使是指定空口令。</p> <p>指定和修改用户口令的Shell命令是<code>passwd</code>。超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。命令的格式如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>passwd [option] username
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可使用的选项如下：</p> <ul><li><code>-l</code>：锁定口令，即禁用账号。</li> <li><code>-u</code>：口令解锁。</li> <li><code>-d</code>：使账号无口令。这样，下次登录的时候，系统就不再允许该用户登录了。</li> <li><code>-f</code>：强迫用户下次登陆时修改口令。</li></ul> <p>如果不指定用户名，则表示修改自己的口令。</p> <h3 id="_3-2-用户组管理"><a href="#_3-2-用户组管理" class="header-anchor">#</a> 3.2 用户组管理</h3> <h4 id="_3-2-1-使用groupadd命令创建用户组"><a href="#_3-2-1-使用groupadd命令创建用户组" class="header-anchor">#</a> 3.2.1 使用groupadd命令创建用户组</h4> <p>增加一个新的用户组使用groupadd命令。命令格式如下。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">groupadd</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span> groupname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可使用的选项如下：</p> <ul><li><code>-r</code>：表示创建系统用户组，该类用户组的 GID 值小于 500；若没有 - r 参数，则创建普通用户组，其 GID 值大于或等于 500。</li> <li><code>-g gid</code>：指定新用户组的标识号GID。</li> <li><code>-o</code>：一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同。</li></ul> <p>如果没有指定选择参数，新组的组标识号是在当前已有的最大组标识号的基础上加1。</p> <h4 id="_3-2-2-使用groupmod修改"><a href="#_3-2-2-使用groupmod修改" class="header-anchor">#</a> 3.2.2 使用groupmod修改</h4> <p>修改用户组的属性使用groupmod命令。命令格式如下。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">groupmod</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span> groupname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可使用的选项如下：</p> <ul><li><code>-g gid</code>：为用户组指定新的组标识号。</li> <li><code>-o</code>：与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。</li> <li><code>-n newgroupname</code>： 将用户组的名字改为新名字</li></ul> <h4 id="_3-2-3-使用groupdel命令删除用户组"><a href="#_3-2-3-使用groupdel命令删除用户组" class="header-anchor">#</a> 3.2.3 使用groupdel命令删除用户组</h4> <p>使用groupdel命令可以删除用户组。命令格式如下。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">groupdel</span> groupname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><font color="red">在删除用户组时，被删除的用户组不能是某个账户的私有用户组，否则将无法删除，若要删除，则应先删除引用该私有用户组的账户，然后再删除用户组。</font></p> <h4 id="_3-2-4-使用gpasswd命令管理用户组"><a href="#_3-2-4-使用gpasswd命令管理用户组" class="header-anchor">#</a> 3.2.4 使用gpasswd命令管理用户组</h4> <p>为了避免系统管理员（root）太忙碌，无法及时管理群组，我们可以使用 gpasswd 命令给群组设置一个群组管理员，代替 root 完成将用户加入或移出群组的操作。gpasswd命令格式如下。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>gpasswd <span class="token punctuation">[</span>option<span class="token punctuation">]</span> groupname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可选择的选项如下：</p> <table><thead><tr><th style="text-align:center;">选项</th> <th style="text-align:center;">功能</th></tr></thead> <tbody><tr><td style="text-align:center;"></td> <td style="text-align:center;">选项为空时，表示给群组设置密码，仅 root 用户可用。</td></tr> <tr><td style="text-align:center;">-A user1,...</td> <td style="text-align:center;">将群组的控制权交给 user1,... 等用户管理，也就是说，设置 user1,... 等用户为群组的管理员，仅 root 用户可用。</td></tr> <tr><td style="text-align:center;">-M user1,...</td> <td style="text-align:center;">将 user1,... 加入到此群组中，仅 root 用户可用。</td></tr> <tr><td style="text-align:center;">-r</td> <td style="text-align:center;">移除群组的密码，仅 root 用户可用。</td></tr> <tr><td style="text-align:center;">-R</td> <td style="text-align:center;">让群组的密码失效，仅 root 用户可用。</td></tr> <tr><td style="text-align:center;">-a user</td> <td style="text-align:center;">将 user 用户加入到群组中。</td></tr> <tr><td style="text-align:center;">-d user</td> <td style="text-align:center;">将 user 用户从群组中移除。</td></tr></tbody></table> <p>实例如下。</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bba82a11cf576dfbe9b1b405c7fa91ab-20231125214704213.png" alt="image-20220504165806305"></p> <h4 id="_3-2-5-使用newgrp命令切换用户的有效组"><a href="#_3-2-5-使用newgrp命令切换用户的有效组" class="header-anchor">#</a> 3.2.5 使用newgrp命令切换用户的有效组</h4> <p>我们知道，每个用户可以属于一个初始组（用户是这个组的初始用户），也可以属于多个附加组（用户是这个组的附加用户）。既然用户可以属于这么多用户组，那么用户在创建文件后，默认生效的组身份是哪个呢？</p> <p>当然是初始用户组的组身份生效，因为初始组是用户一旦登陆就获得的组身份。也就是说，用户的有效组默认是初始组，因此所创建文件的属组是用户的初始组。那么，既然用户属于多个用户组，能不能改变用户的初始组呢？使用命令 newgrp 就可以。此命令基本格式如下。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>newgrp groupname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>newgrp 命令可以从用户的附加组中选择一个群组，作为用户新的初始组。</p> <h2 id="_4-其他相关命令"><a href="#_4-其他相关命令" class="header-anchor">#</a> 4 其他相关命令</h2> <h3 id="_4-1-id命令查看用户的uid和gid"><a href="#_4-1-id命令查看用户的uid和gid" class="header-anchor">#</a> 4.1 id命令查看用户的UID和GID</h3> <p>id 命令可以查询用户的UID、GID 和附加组的信息。命令比较简单，格式如下。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">id</span> username
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例如下：</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e7235be54ea1e48c59c3689b2856f75c.png" alt="image-20220504161152456"></p> <h3 id="_4-2-su命令临时切换用户身份"><a href="#_4-2-su命令临时切换用户身份" class="header-anchor">#</a> 4.2 su命令临时切换用户身份</h3> <p>su 是最简单的用户切换命令，通过该命令可以实现任何身份的切换，包括从普通用户切换为 root 用户、从 root 用户切换为普通用户以及普通用户之间的切换。</p> <p><font color="red">普通用户之间切换以及普通用户切换至 root 用户，都需要知晓对方的密码，只有正确输入密码，才能实现切换；从 root 用户切换至其他用户，无需知晓对方密码，直接可切换成功。</font></p> <p>su命令格式如下。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">su</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span> username
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可使用的选项如下：</p> <ul><li><code>-l或-</code>：带这个参数就好像是重新 login 为该使用者一样，大部份环境参数都是以该使用者为主，并且工作目录也会改变，如果没有指定 USER ，内定是 root。</li> <li><code>-c &lt;command&gt;</code> ：仅切换用户执行一次命令，执行后自动切换回来，该选项后通常会带有要执行的命令。</li> <li><code>-s &lt;shell&gt;</code>： 指定要执行的 shell （bash csh tcsh 等），预设值为 /etc/passwd 内的该使用者shell</li> <li><code>-h</code>：显示说明文件。</li> <li><code>-V</code>：显示版本资讯。</li> <li><code>-m或-p</code>：执行su时不改变工作环境。</li></ul> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/8015a145aca6fb66062f3a9d8973ed72.png" alt="image-20220504162626296"></p> <h3 id="_4-3-whoami和who-am-i命令"><a href="#_4-3-whoami和who-am-i命令" class="header-anchor">#</a> 4.3 whoami和who am i命令</h3> <p>whoami 命令和 who am i 命令是不同的 2 个命令，前者用来打印当前执行操作的用户名，后者则用来打印登陆当前 Linux 系统的用户名。</p> <p>我们可以看一下操作实例来感受区别：</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/608b588d94af27af4ad729454707411b.png" alt="image-20220504163557031"></p> <p>在未切换用户身份之前，whoami 和 who am i 命令的输出是一样的，但使用 su 命令切换用户身份后，使用 whoami 命令打印的是切换后的用户名，而 who am i 命令打印的仍旧是登陆系统时所用的用户名。</p> <h3 id="_4-4-users和groups命令"><a href="#_4-4-users和groups命令" class="header-anchor">#</a> 4.4 users和groups命令</h3> <p>users命令格式如下。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">users</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>如果没有参数，则显示当前登录系统的所有用户的用户列表。每个显示的用户名对应一个登录会话。如果一个用户有不止一个登录会话，那他的用户名将显示相同的次数。</li> <li><code>--help</code>：显示命令的帮助信息。</li> <li><code>--version</code>：显示命令的版本信息。</li></ul> <p>groups命令格式如下。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">groups</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">[</span>groupname<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>如果没有参数，查看当前登录用户的组内成员。如果指定了groupname，则显示该group的成员。</li> <li><code>--help</code>：显示命令的帮助信息。</li> <li><code>--version</code>：显示命令的版本信息。</li></ul> <h2 id="_5-高级操作示例"><a href="#_5-高级操作示例" class="header-anchor">#</a> 5 高级操作示例</h2> <h3 id="_5-1-通过更改用户和组的配置文件-直接添加或修改用户和组"><a href="#_5-1-通过更改用户和组的配置文件-直接添加或修改用户和组" class="header-anchor">#</a> 5.1 通过更改用户和组的配置文件，直接添加或修改用户和组</h3> <p>为了更深入了解用户和组的相关配置文件，可以手动更改配置文件以达到命令的执行效果。</p> <p>首先我们需要了解Linux中的/etc/skel目录。skel是skeleton的缩写，意为骨骼、框架。故此目录的作用是在建立新用户时，用于初始化用户根目录。系统会将此目录下的所有文件、目录都复制到新建用户的主目录，并且将用户属主与用户组调整为与此主目录相同。所以可将用户配置文件预置到/etc/skel目录下，比如说.bashrc、.profile与.vimrc等。</p> <p>注意：</p> <ul><li>如果在新建用户时，没有自动建立用户根目录，则无法调用到此框架目录。</li> <li>如果不想以默认的/etc/skel目录作为框架目录，可以在运行useradd命令时使用<code>-k</code>指定新的框架目录。</li> <li>如果不想在每次新建用户时，都重新指定新的框架目录，可以通过修改/etc/default/useradd配置文件来改变默认的框架目录。修改SKEL变量的值即可。原来为<code>SKEL=/etc/skel</code>。</li></ul> <p>实际操作步骤如下：</p> <ol><li><p>编辑/etc/group文件，添加组test，其中GID为1500。</p> <p><code>echo 'test:x:1500' &gt;&gt; /etc/group</code></p></li> <li><p>创建用户的主目录。</p> <p>我们需要将框架目录中的文件放到主目录中。同时还需要修改好主目录对其他用户都没有任何访问权限。</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/3d9ce011a1404b37a0688da4860e9456.png" alt="在这里插入图片描述"></p></li> <li><p>编辑/etc/passwd文件，添加用户test，UID为1500，其中基本组ID为test组的GID，其家目录为/home/test。</p> <p><code>echo 'test:x:1500:1500::/home/test:/bin/bash' &gt;&gt; /etc/passwd</code></p></li> <li><p>修改/home/test目录及其内部所有文件的属主为test，属组为test。</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/505e991a41cc9c3b49b6fb662b94eae5.png" alt="image-20220504191453653"></p></li> <li><p>修改test用户的密码并尝试登录。</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/699e451be8c44c7c8b38179abae26fec.png" alt="在这里插入图片描述"></p></li></ol> <h3 id="_5-2-linux批量添加用户"><a href="#_5-2-linux批量添加用户" class="header-anchor">#</a> 5.2 Linux批量添加用户</h3> <p>我们可以使用useradd+passwd命令配合shell脚本来实现该功能。</p> <p>首先我们将需要创建的用户名写入一个文本文件，其中每行代表一个用户名：</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/c197c4ecea8d4a52815a3671c2db21e4.png" alt="在这里插入图片描述"></p> <p>然后实际上我们的思路就是提取出文件中的用户名然后自动执行useradd命令，再执行passwd自动填入初始密码。编写的shell脚本文件如下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#! /bin/bash</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">username</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">more</span> username.txt<span class="token variable">)</span></span>
<span class="token keyword">do</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token variable">$username</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
        <span class="token function">useradd</span> <span class="token parameter variable">-m</span> <span class="token variable">$username</span> <span class="token comment"># 执行useradd命令</span>
        <span class="token builtin class-name">echo</span> <span class="token variable">$username</span><span class="token string">&quot;123456&quot;</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> <span class="token variable">$username</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;User <span class="token variable">$username</span>'s password is changed!&quot;</span>
<span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;The username is null!&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/34bdf7a7e0714f0aa3ce0e831f11a6eb.png" alt="在这里插入图片描述"></p> <p>测试登录，登录成功！</p> <p><img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/a825fa4fb9da3a81cf4bf2cf6eeea224-20231125214638090.png" alt="image-20220504193147760"></p></div></div> <div class="page-slot page-slot-bottom"><div class="donation">
      <button>打赏</button>
      <div class="main">
        <div class="pic">
          <img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/wechatpay.jpeg" alt="微信">
          <img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/zhifubaopay.jpeg" alt="支付宝">
        </div>
      </div>  
    </div></div> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Linux" title="标签">#Linux</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/11/25, 22:00:34</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/b04f81/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Linux常用文件管理命令</div></a> <a href="/pages/64b48d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Linux 系统调用函数fork、vfork、clone详解</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/b04f81/" class="prev">Linux常用文件管理命令</a></span> <span class="next"><a href="/pages/64b48d/">Linux 系统调用函数fork、vfork、clone详解</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/5760f4/"><div>
            MIT 6.5840(6.824) 使用Go进行线程和RPC编程
            <!----></div></a> <span class="date">05-15</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/b81dcf/"><div>
            MIT 6.5840(6.824) Lab1:MapReduce 设计实现
            <!----></div></a> <span class="date">05-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/d0e06c/"><div>
            MIT 6.5840(6.824) 分布式系统介绍
            <!----></div></a> <span class="date">05-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:unique.hzf@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/unique-pure" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://pursuit.blog.csdn.net/" title="My CSDN" target="_blank" class="iconfont icon-csdn"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2024
    <span>Pursuit | <a href="https://github.com/unique-pure/my-vdoing-blog-template/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><div></div><WebInfo></WebInfo><PageInfo></PageInfo><div></div></div></div>
    <script src="/assets/js/app.a4cafcca.js" defer></script><script src="/assets/js/4.71a85121.js" defer></script><script src="/assets/js/1.4a1189e9.js" defer></script><script src="/assets/js/3.bca043f9.js" defer></script><script src="/assets/js/98.5d2c4771.js" defer></script><script src="/assets/js/20.bc1029fc.js" defer></script>
  </body>
</html>
