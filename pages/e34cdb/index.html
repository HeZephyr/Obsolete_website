<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shell 23道例题实战 | Pursuit&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="随便写写">
    <meta name="keywords" content="python,Go,C++,git,github,markdown,database,mysql,redis">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.a3990aec.css" as="style"><link rel="preload" href="/assets/js/app.bf22d313.js" as="script"><link rel="preload" href="/assets/js/4.71a85121.js" as="script"><link rel="preload" href="/assets/js/1.4a1189e9.js" as="script"><link rel="preload" href="/assets/js/3.bca043f9.js" as="script"><link rel="preload" href="/assets/js/103.94fdd963.js" as="script"><link rel="preload" href="/assets/js/20.bc1029fc.js" as="script"><link rel="prefetch" href="/assets/js/10.ce2d8b4d.js"><link rel="prefetch" href="/assets/js/100.c6b7de61.js"><link rel="prefetch" href="/assets/js/101.a1952818.js"><link rel="prefetch" href="/assets/js/102.837bf460.js"><link rel="prefetch" href="/assets/js/104.acbbd1e2.js"><link rel="prefetch" href="/assets/js/105.eae4e099.js"><link rel="prefetch" href="/assets/js/106.cff8eabf.js"><link rel="prefetch" href="/assets/js/107.2bcc8651.js"><link rel="prefetch" href="/assets/js/108.47b5cd4a.js"><link rel="prefetch" href="/assets/js/109.b30c73e0.js"><link rel="prefetch" href="/assets/js/11.87208a0c.js"><link rel="prefetch" href="/assets/js/110.11617855.js"><link rel="prefetch" href="/assets/js/111.0eb20766.js"><link rel="prefetch" href="/assets/js/112.07452da9.js"><link rel="prefetch" href="/assets/js/113.d7c6b561.js"><link rel="prefetch" href="/assets/js/114.a7761af9.js"><link rel="prefetch" href="/assets/js/115.e276743d.js"><link rel="prefetch" href="/assets/js/116.893ee4c4.js"><link rel="prefetch" href="/assets/js/117.8fe66ede.js"><link rel="prefetch" href="/assets/js/118.1413d99e.js"><link rel="prefetch" href="/assets/js/119.2303fc76.js"><link rel="prefetch" href="/assets/js/12.7f5cceef.js"><link rel="prefetch" href="/assets/js/120.f50d7974.js"><link rel="prefetch" href="/assets/js/121.693fe9db.js"><link rel="prefetch" href="/assets/js/122.825badd2.js"><link rel="prefetch" href="/assets/js/123.ac5cff17.js"><link rel="prefetch" href="/assets/js/124.d2a351c7.js"><link rel="prefetch" href="/assets/js/125.36b4e9a5.js"><link rel="prefetch" href="/assets/js/126.f3bc4c16.js"><link rel="prefetch" href="/assets/js/127.f72b1a4f.js"><link rel="prefetch" href="/assets/js/128.d8d9bc68.js"><link rel="prefetch" href="/assets/js/129.53d2b635.js"><link rel="prefetch" href="/assets/js/13.f2cea533.js"><link rel="prefetch" href="/assets/js/130.1dc6d120.js"><link rel="prefetch" href="/assets/js/131.f1ff6308.js"><link rel="prefetch" href="/assets/js/132.80757a9c.js"><link rel="prefetch" href="/assets/js/133.27a18f5d.js"><link rel="prefetch" href="/assets/js/134.0a18c136.js"><link rel="prefetch" href="/assets/js/135.339fbb7d.js"><link rel="prefetch" href="/assets/js/136.a53f9873.js"><link rel="prefetch" href="/assets/js/137.12db62b0.js"><link rel="prefetch" href="/assets/js/138.eebd39fe.js"><link rel="prefetch" href="/assets/js/139.038c217c.js"><link rel="prefetch" href="/assets/js/14.f8459573.js"><link rel="prefetch" href="/assets/js/140.03946f8a.js"><link rel="prefetch" href="/assets/js/141.cea1a41c.js"><link rel="prefetch" href="/assets/js/142.62dab267.js"><link rel="prefetch" href="/assets/js/143.1e9e2b0f.js"><link rel="prefetch" href="/assets/js/144.f2efd35f.js"><link rel="prefetch" href="/assets/js/145.11a31f5f.js"><link rel="prefetch" href="/assets/js/146.e363c390.js"><link rel="prefetch" href="/assets/js/147.ff066c84.js"><link rel="prefetch" href="/assets/js/148.59bfffb4.js"><link rel="prefetch" href="/assets/js/149.92ae23e9.js"><link rel="prefetch" href="/assets/js/15.06cd6cc8.js"><link rel="prefetch" href="/assets/js/150.f95206e8.js"><link rel="prefetch" href="/assets/js/151.31dd32bd.js"><link rel="prefetch" href="/assets/js/152.08c63a7b.js"><link rel="prefetch" href="/assets/js/153.3412415d.js"><link rel="prefetch" href="/assets/js/154.cfa5d205.js"><link rel="prefetch" href="/assets/js/155.fe2984c4.js"><link rel="prefetch" href="/assets/js/156.a7184e68.js"><link rel="prefetch" href="/assets/js/157.feca608b.js"><link rel="prefetch" href="/assets/js/158.892f9f19.js"><link rel="prefetch" href="/assets/js/159.d0bd5ee4.js"><link rel="prefetch" href="/assets/js/16.33942615.js"><link rel="prefetch" href="/assets/js/160.b053cf7f.js"><link rel="prefetch" href="/assets/js/161.8399fee4.js"><link rel="prefetch" href="/assets/js/162.2e6412db.js"><link rel="prefetch" href="/assets/js/163.2f5cf90e.js"><link rel="prefetch" href="/assets/js/164.da241573.js"><link rel="prefetch" href="/assets/js/165.bbca82ee.js"><link rel="prefetch" href="/assets/js/166.567e34e1.js"><link rel="prefetch" href="/assets/js/167.77360d51.js"><link rel="prefetch" href="/assets/js/168.459b1b54.js"><link rel="prefetch" href="/assets/js/169.5b4040b3.js"><link rel="prefetch" href="/assets/js/17.da2e0126.js"><link rel="prefetch" href="/assets/js/170.57b36e66.js"><link rel="prefetch" href="/assets/js/171.2fd5c08f.js"><link rel="prefetch" href="/assets/js/172.5c164d95.js"><link rel="prefetch" href="/assets/js/173.94a3f011.js"><link rel="prefetch" href="/assets/js/174.f935c1bd.js"><link rel="prefetch" href="/assets/js/175.88cdd60c.js"><link rel="prefetch" href="/assets/js/176.a1808e7d.js"><link rel="prefetch" href="/assets/js/177.2a07cf9b.js"><link rel="prefetch" href="/assets/js/178.ad9a4057.js"><link rel="prefetch" href="/assets/js/179.9660f6e4.js"><link rel="prefetch" href="/assets/js/18.a39b8ae2.js"><link rel="prefetch" href="/assets/js/180.11dc6574.js"><link rel="prefetch" href="/assets/js/181.66ebaad2.js"><link rel="prefetch" href="/assets/js/182.bb310d8a.js"><link rel="prefetch" href="/assets/js/183.01eceb36.js"><link rel="prefetch" href="/assets/js/184.532e491f.js"><link rel="prefetch" href="/assets/js/185.dd122ad8.js"><link rel="prefetch" href="/assets/js/186.8fc1274d.js"><link rel="prefetch" href="/assets/js/187.4b297d09.js"><link rel="prefetch" href="/assets/js/19.1760f287.js"><link rel="prefetch" href="/assets/js/2.8e76b5b7.js"><link rel="prefetch" href="/assets/js/21.4b161474.js"><link rel="prefetch" href="/assets/js/22.69d29451.js"><link rel="prefetch" href="/assets/js/23.2a87052f.js"><link rel="prefetch" href="/assets/js/24.6beeaf9b.js"><link rel="prefetch" href="/assets/js/25.e9d4e312.js"><link rel="prefetch" href="/assets/js/26.c128f1d5.js"><link rel="prefetch" href="/assets/js/27.2bab9253.js"><link rel="prefetch" href="/assets/js/28.0b0ea581.js"><link rel="prefetch" href="/assets/js/29.71a2a1e9.js"><link rel="prefetch" href="/assets/js/30.11fd1987.js"><link rel="prefetch" href="/assets/js/31.92abb231.js"><link rel="prefetch" href="/assets/js/32.27d7c672.js"><link rel="prefetch" href="/assets/js/33.9f002fe8.js"><link rel="prefetch" href="/assets/js/34.39abd7b3.js"><link rel="prefetch" href="/assets/js/35.a54492ae.js"><link rel="prefetch" href="/assets/js/36.1b3ef370.js"><link rel="prefetch" href="/assets/js/37.3dda47b6.js"><link rel="prefetch" href="/assets/js/38.3dc3656a.js"><link rel="prefetch" href="/assets/js/39.78160c0e.js"><link rel="prefetch" href="/assets/js/40.382841f8.js"><link rel="prefetch" href="/assets/js/41.885f2f51.js"><link rel="prefetch" href="/assets/js/42.a794deca.js"><link rel="prefetch" href="/assets/js/43.bd06b1c5.js"><link rel="prefetch" href="/assets/js/44.c5b9fce0.js"><link rel="prefetch" href="/assets/js/45.8e169e05.js"><link rel="prefetch" href="/assets/js/46.907fb663.js"><link rel="prefetch" href="/assets/js/47.b494d092.js"><link rel="prefetch" href="/assets/js/48.7c4206ed.js"><link rel="prefetch" href="/assets/js/49.16bab940.js"><link rel="prefetch" href="/assets/js/5.780a742d.js"><link rel="prefetch" href="/assets/js/50.bf2afa43.js"><link rel="prefetch" href="/assets/js/51.0a1e84c2.js"><link rel="prefetch" href="/assets/js/52.59a39ef7.js"><link rel="prefetch" href="/assets/js/53.572697e9.js"><link rel="prefetch" href="/assets/js/54.fc2487d6.js"><link rel="prefetch" href="/assets/js/55.e141f0c8.js"><link rel="prefetch" href="/assets/js/56.7e333e13.js"><link rel="prefetch" href="/assets/js/57.65140fab.js"><link rel="prefetch" href="/assets/js/58.4f519804.js"><link rel="prefetch" href="/assets/js/59.8d7b46a7.js"><link rel="prefetch" href="/assets/js/6.6c206683.js"><link rel="prefetch" href="/assets/js/60.51f050d8.js"><link rel="prefetch" href="/assets/js/61.d0be8bfb.js"><link rel="prefetch" href="/assets/js/62.a15c3ffa.js"><link rel="prefetch" href="/assets/js/63.d178adeb.js"><link rel="prefetch" href="/assets/js/64.1de53088.js"><link rel="prefetch" href="/assets/js/65.1f66b952.js"><link rel="prefetch" href="/assets/js/66.3d9ec4f6.js"><link rel="prefetch" href="/assets/js/67.c25c7eea.js"><link rel="prefetch" href="/assets/js/68.c2233d35.js"><link rel="prefetch" href="/assets/js/69.b5a9f3d3.js"><link rel="prefetch" href="/assets/js/7.03420b55.js"><link rel="prefetch" href="/assets/js/70.d651fd44.js"><link rel="prefetch" href="/assets/js/71.16881e1e.js"><link rel="prefetch" href="/assets/js/72.ea2a2f74.js"><link rel="prefetch" href="/assets/js/73.4082041c.js"><link rel="prefetch" href="/assets/js/74.48e511ca.js"><link rel="prefetch" href="/assets/js/75.59b2157d.js"><link rel="prefetch" href="/assets/js/76.285801a4.js"><link rel="prefetch" href="/assets/js/77.a26a0c17.js"><link rel="prefetch" href="/assets/js/78.bdb45583.js"><link rel="prefetch" href="/assets/js/79.3bce4a31.js"><link rel="prefetch" href="/assets/js/80.6b49a79a.js"><link rel="prefetch" href="/assets/js/81.a4b9d26e.js"><link rel="prefetch" href="/assets/js/82.1079fef2.js"><link rel="prefetch" href="/assets/js/83.cfaa864c.js"><link rel="prefetch" href="/assets/js/84.8e869aa2.js"><link rel="prefetch" href="/assets/js/85.ea42d8a3.js"><link rel="prefetch" href="/assets/js/86.a948fda8.js"><link rel="prefetch" href="/assets/js/87.ec5eefd3.js"><link rel="prefetch" href="/assets/js/88.a3c0617a.js"><link rel="prefetch" href="/assets/js/89.674cd71f.js"><link rel="prefetch" href="/assets/js/90.a8421d15.js"><link rel="prefetch" href="/assets/js/91.e3bff157.js"><link rel="prefetch" href="/assets/js/92.655c454e.js"><link rel="prefetch" href="/assets/js/93.9e8d559d.js"><link rel="prefetch" href="/assets/js/94.196e4c2a.js"><link rel="prefetch" href="/assets/js/95.30a85f63.js"><link rel="prefetch" href="/assets/js/96.1318b23d.js"><link rel="prefetch" href="/assets/js/97.984ad933.js"><link rel="prefetch" href="/assets/js/98.bb7f6e86.js"><link rel="prefetch" href="/assets/js/99.7a4682f0.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.caeb3b49.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a3990aec.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpeg" alt="Pursuit's blog" class="logo"> <span class="site-name can-hide">Pursuit's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/develop/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/develop/language/" class="nav-link">编程语言</a></li><li class="dropdown-item"><!----> <a href="/develop/framework/" class="nav-link">开发框架</a></li><li class="dropdown-item"><!----> <a href="/develop/algorithm/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/develop/storage/" class="nav-link">数据存储</a></li><li class="dropdown-item"><!----> <a href="/develop/system/" class="nav-link">系统架构</a></li><li class="dropdown-item"><!----> <a href="/develop/network/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/develop/cloud/" class="nav-link">云原生</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/vcs/" class="nav-link">版本控制</a></li><li class="dropdown-item"><!----> <a href="/tool/network/" class="nav-link">网络工具</a></li><li class="dropdown-item"><!----> <a href="/tool/develop/" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><a href="/note/" class="link-title">学习笔记</a> <span class="title" style="display:none;">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/paper/" class="nav-link">学术搬砖</a></li><li class="dropdown-item"><!----> <a href="/note/project/" class="nav-link">实践项目</a></li><li class="dropdown-item"><!----> <a href="/note/lecture/" class="nav-link">讲座研讨</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活杂谈" class="dropdown-title"><a href="/life/" class="link-title">生活杂谈</a> <span class="title" style="display:none;">生活杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/life/year/" class="nav-link">随写编年</a></li><li class="dropdown-item"><!----> <a href="/life/youth/" class="nav-link">追忆青春</a></li><li class="dropdown-item"><!----> <a href="/life/travel/" class="nav-link">旅行日记</a></li><li class="dropdown-item"><!----> <a href="/life/art/" class="nav-link">文艺时光</a></li><li class="dropdown-item"><!----> <a href="/life/cook/" class="nav-link">烹调分享</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源收藏" class="dropdown-title"><a href="/resource/" class="link-title">资源收藏</a> <span class="title" style="display:none;">资源收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resource/website/" class="nav-link">实用网站</a></li><li class="dropdown-item"><!----> <a href="/resource/project/" class="nav-link">优秀项目</a></li><li class="dropdown-item"><!----> <a href="/resource/study/" class="nav-link">学习资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/more/tip/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/more/blog/" class="nav-link">博客相关</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friend/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/unique-pure/my-vdoing-blog-template" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.jpeg"> <div class="blogger-info"><h3>Pursuit</h3> <span>但行好事，莫问前程</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/develop/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/develop/language/" class="nav-link">编程语言</a></li><li class="dropdown-item"><!----> <a href="/develop/framework/" class="nav-link">开发框架</a></li><li class="dropdown-item"><!----> <a href="/develop/algorithm/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/develop/storage/" class="nav-link">数据存储</a></li><li class="dropdown-item"><!----> <a href="/develop/system/" class="nav-link">系统架构</a></li><li class="dropdown-item"><!----> <a href="/develop/network/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/develop/cloud/" class="nav-link">云原生</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/vcs/" class="nav-link">版本控制</a></li><li class="dropdown-item"><!----> <a href="/tool/network/" class="nav-link">网络工具</a></li><li class="dropdown-item"><!----> <a href="/tool/develop/" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><a href="/note/" class="link-title">学习笔记</a> <span class="title" style="display:none;">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/paper/" class="nav-link">学术搬砖</a></li><li class="dropdown-item"><!----> <a href="/note/project/" class="nav-link">实践项目</a></li><li class="dropdown-item"><!----> <a href="/note/lecture/" class="nav-link">讲座研讨</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活杂谈" class="dropdown-title"><a href="/life/" class="link-title">生活杂谈</a> <span class="title" style="display:none;">生活杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/life/year/" class="nav-link">随写编年</a></li><li class="dropdown-item"><!----> <a href="/life/youth/" class="nav-link">追忆青春</a></li><li class="dropdown-item"><!----> <a href="/life/travel/" class="nav-link">旅行日记</a></li><li class="dropdown-item"><!----> <a href="/life/art/" class="nav-link">文艺时光</a></li><li class="dropdown-item"><!----> <a href="/life/cook/" class="nav-link">烹调分享</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源收藏" class="dropdown-title"><a href="/resource/" class="link-title">资源收藏</a> <span class="title" style="display:none;">资源收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resource/website/" class="nav-link">实用网站</a></li><li class="dropdown-item"><!----> <a href="/resource/project/" class="nav-link">优秀项目</a></li><li class="dropdown-item"><!----> <a href="/resource/study/" class="nav-link">学习资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/more/tip/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/more/blog/" class="nav-link">博客相关</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friend/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/unique-pure/my-vdoing-blog-template" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程语言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据存储</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>系统架构</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/d66bf9/" class="sidebar-link">Linux常用命令、管道、环境变量</a></li><li><a href="/pages/b04f81/" class="sidebar-link">Linux常用文件管理命令</a></li><li><a href="/pages/419777/" class="sidebar-link">Linux用户和用户组教程</a></li><li><a href="/pages/64b48d/" class="sidebar-link">Linux 系统调用函数fork、vfork、clone详解</a></li><li><a href="/pages/d8622e/" class="sidebar-link">Linux execve函数详解</a></li><li><a href="/pages/ae59ea/" class="sidebar-link">Shell 教程</a></li><li><a href="/pages/e34cdb/" aria-current="page" class="active sidebar-link">Shell 23道例题实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_1-统计文件的行数" class="sidebar-link">1 统计文件的行数</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_2-打印文件的最后5行" class="sidebar-link">2 打印文件的最后5行</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_3-输出-0-到-500-中-7-的倍数" class="sidebar-link">3 输出 0 到 500 中 7 的倍数</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_4-输出第5行的内容" class="sidebar-link">4 输出第5行的内容</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_5-打印空行的行号" class="sidebar-link">5 打印空行的行号</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_6-去掉空行" class="sidebar-link">6 去掉空行</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_7-打印字母数小于8的单词" class="sidebar-link">7 打印字母数小于8的单词</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_8-统计所有进程占用内存百分比的和" class="sidebar-link">8 统计所有进程占用内存百分比的和</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_9-统计每个单词出现的个数" class="sidebar-link">9 统计每个单词出现的个数</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_10-第二列是否有重复" class="sidebar-link">10 第二列是否有重复</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_11-转置文件的内容" class="sidebar-link">11 转置文件的内容</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_12-打印每一行出现的数字个数" class="sidebar-link">12 打印每一行出现的数字个数</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_13-去掉所有包含this的句子" class="sidebar-link">13 去掉所有包含this的句子</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_14-求平均值" class="sidebar-link">14 求平均值</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_15-去掉不需要的单词" class="sidebar-link">15 去掉不需要的单词</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_16-判断输入的是否为ip地址" class="sidebar-link">16 判断输入的是否为IP地址</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_17-将字段逆序输出文件的每行" class="sidebar-link">17 将字段逆序输出文件的每行</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_18-域名进行计数排序处理" class="sidebar-link">18 域名进行计数排序处理</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_19-打印等腰三角形" class="sidebar-link">19 打印等腰三角形</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_20-打印只有一个数字的行" class="sidebar-link">20 打印只有一个数字的行</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_21-格式化输出" class="sidebar-link">21 格式化输出</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_22-处理文本" class="sidebar-link">22 处理文本</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_23-nginx日志分析1-ip访问次数统计" class="sidebar-link">23 Nginx日志分析1-IP访问次数统计</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_24-nginx日志分析2-统计某个时间段的ip访问量" class="sidebar-link">24 Nginx日志分析2-统计某个时间段的IP访问量</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_25-nginx日志分析3-统计访问3次以上的ip" class="sidebar-link">25 nginx日志分析3-统计访问3次以上的IP</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_26-nginx日志分析4-查询某个ip的详细访问情况" class="sidebar-link">26 Nginx日志分析4-查询某个IP的详细访问情况</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_27-nginx日志分析5-统计爬虫抓取404的次数" class="sidebar-link">27 nginx日志分析5-统计爬虫抓取404的次数</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_28-nginx日志分析6-统计每分钟的请求数" class="sidebar-link">28 Nginx日志分析6-统计每分钟的请求数</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_29-netstat练习1-查看各个状态的连接数" class="sidebar-link">29 netstat练习1-查看各个状态的连接数</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_30-netstat练习2-查看和3306端口建立的连接" class="sidebar-link">30 netstat练习2-查看和3306端口建立的连接</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_31-netstat练习3-输出每个ip的连接数" class="sidebar-link">31 netstat练习3-输出每个IP的连接数</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_32-netstat练习4-输出和3306端口建立连接总的各个状态的数目" class="sidebar-link">32 netstat练习4-输出和3306端口建立连接总的各个状态的数目</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_33-业务分析-提取值" class="sidebar-link">33 业务分析-提取值</a></li><li class="sidebar-sub-header level2"><a href="/pages/e34cdb/#_34-ps分析-统计vsz-rss各自总和" class="sidebar-link">34 ps分析-统计VSZ,RSS各自总和</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>操作系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>分布式系统</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>云原生</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/develop/#开发" data-v-06225672>开发</a></li><li data-v-06225672><a href="/develop/#系统架构" data-v-06225672>系统架构</a></li><li data-v-06225672><a href="/develop/#Linux" data-v-06225672>Linux</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/unique-pure" target="_blank" title="作者" class="beLink" data-v-06225672>Pursuit</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-06-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Shell 23道例题实战<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="_1-统计文件的行数"><a href="#_1-统计文件的行数" class="header-anchor">#</a> 1 统计文件的行数</h2> <blockquote><p>编写一个<code>shell</code>脚本以输出一个文本文件<code>nowcoder.txt</code>中的行数</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 方法1：使用 wc -l 和 awk</span>
<span class="token comment"># 统计行数并使用 awk 提取第一个字段，即行数</span>
<span class="token assign-left variable">lines</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wc</span> <span class="token parameter variable">-l</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $1}'</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;使用 wc -l 和 awk：<span class="token variable">$lines</span> 行&quot;</span>

<span class="token comment"># 方法2：通过输入流传递文件内容给 wc -l</span>
<span class="token comment"># 使用 &lt; 操作符</span>
<span class="token assign-left variable">lines</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wc</span> <span class="token parameter variable">-l</span> <span class="token operator">&lt;</span> nowcoder.txt<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;通过输入流：<span class="token variable">$lines</span> 行&quot;</span>

<span class="token comment"># 方法3：使用 cat 和管道传递给 wc -l</span>
<span class="token comment"># 使用 cat 命令和管道</span>
<span class="token assign-left variable">lines</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;通过管道：<span class="token variable">$lines</span> 行&quot;</span>

<span class="token comment"># 方法4：使用 sed 统计行数</span>
<span class="token comment"># 使用 sed 的 -n '$=' 选项</span>
<span class="token assign-left variable">lines</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'$='</span> nowcoder.txt<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;使用 sed：<span class="token variable">$lines</span> 行&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="_2-打印文件的最后5行"><a href="#_2-打印文件的最后5行" class="header-anchor">#</a> 2 打印文件的最后5行</h2> <blockquote><p>查看日志的时候，经常会从文件的末尾往前查看，请你写一个<code>bash shell</code>脚本以输出一个文本文件<code>nowcoder.txt</code>中的最后5行。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 查看文件的前5行</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;前5行：&quot;</span>
<span class="token function">head</span> <span class="token parameter variable">-5</span> nowcoder.txt
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>

<span class="token comment"># 查看文件的后5行</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;后5行：&quot;</span>
<span class="token function">tail</span> <span class="token parameter variable">-5</span> nowcoder.txt
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>

<span class="token comment"># 查看文件的第5行到第20行</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;第5行到第20行：&quot;</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'5,20p'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_3-输出-0-到-500-中-7-的倍数"><a href="#_3-输出-0-到-500-中-7-的倍数" class="header-anchor">#</a> 3 输出 0 到 500 中 7 的倍数</h2> <blockquote><p>写一个 <code>bash</code>脚本以输出数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>500</mn></mrow><annotation encoding="application/x-tex">500</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">500</span></span></span></span> 中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span> 的倍数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>071421...</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0 7 14 21...)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">071421...</span><span class="mclose">)</span></span></span></span>的命令</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 方法1：使用 Bash 的扩展语法的 for 循环</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;方法1：使用 Bash 的扩展语法的 for 循环&quot;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">item</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">500</span><span class="token punctuation">..</span><span class="token number">7</span><span class="token punctuation">}</span>
<span class="token keyword">do</span> 
    <span class="token builtin class-name">echo</span> <span class="token variable">$item</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span> <span class="token comment"># 分隔行</span>

<span class="token comment"># 方法2：使用 seq 命令 </span>
<span class="token comment"># seq [选项]... 首部 增量 尾部</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;方法2：使用 seq 命令&quot;</span>
<span class="token function">seq</span> <span class="token number">0</span> <span class="token number">7</span> <span class="token number">500</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span> <span class="token comment"># 分隔行</span>

<span class="token comment"># 方法3：使用 while 循环</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;方法3：使用 while 循环&quot;</span>
<span class="token comment"># 初始化变量</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment"># 使用 while 循环</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> <span class="token parameter variable">-le</span> <span class="token number">500</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token comment"># 输出当前的 7 的倍数</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
    
    <span class="token comment"># 增加 7</span>
    <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>i <span class="token operator">+</span> <span class="token number">7</span><span class="token variable">))</span></span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="_4-输出第5行的内容"><a href="#_4-输出第5行的内容" class="header-anchor">#</a> 4 输出第5行的内容</h2> <blockquote><p>编写一个<code>bash</code>脚本以输出一个文本文件<code>nowcoder.txt</code>中第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span>行的内容。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># head 命令拿到前五行，再通过通道，通过tail取出来最后一行，即第五行</span>
<span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">5</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">tail</span> <span class="token parameter variable">-n</span> <span class="token number">1</span>
<span class="token comment">#!/bin/bash</span>

<span class="token comment"># 使用sed 命令中的 p选项，打印第五行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> 5p nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_5-打印空行的行号"><a href="#_5-打印空行的行号" class="header-anchor">#</a> 5 打印空行的行号</h2> <blockquote><p>编写一个<code>shell</code>脚本以输出一个文本文件<code>nowcoder.txt</code>中空行的行号（空行可能连续，从1开始输出）</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 使用 grep 命令匹配所有空行，并且输出匹配的行号。-n 选项表示输出匹配行的行号，'^$' 匹配空行。使用 cut 命令以 : 作为分隔符，提取每行的第一个字段，即行号。</span>
<span class="token function">grep</span> <span class="token parameter variable">-n</span> <span class="token string">'^$'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">':'</span> <span class="token parameter variable">-f1</span>

<span class="token comment"># 使用 awk 命令，NF 表示当前行的字段数，NR 表示当前行号。当字段数为0时，即当前行为空行，{ print NR } 输出当前行的行号。</span>
<span class="token function">awk</span> <span class="token string">'NF == 0 { print NR }'</span> nowcoder.txt

<span class="token comment"># 使用 sed 命令匹配所有空行，并输出匹配行的行号。-n 选项表示只输出指定的行，/^$/ 匹配空行，=表示输出匹配行的行号。</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/^$/='</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_6-去掉空行"><a href="#_6-去掉空行" class="header-anchor">#</a> 6 去掉空行</h2> <blockquote><p>写一个 <code>bash</code>脚本以去掉一个文本文件<code>nowcoder.txt</code>中的空行</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 使用 grep 命令匹配所有非空行。-v 选项表示反转匹配，'^$' 匹配空行。</span>
<span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">'^$'</span> nowcoder.txt

<span class="token comment"># 使用 sed 命令删除匹配空行的行。/^$/ 匹配空行，d 命令删除匹配的行</span>
<span class="token function">sed</span> <span class="token string">'/^$/d'</span> nowcoder.txt <span class="token operator">&gt;</span> nowcoder_no_empty_lines.txt

<span class="token comment"># 使用 awk 命令，NF 表示字段数，NF 为真时表示非空行。</span>
<span class="token function">awk</span> <span class="token string">'NF'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_7-打印字母数小于8的单词"><a href="#_7-打印字母数小于8的单词" class="header-anchor">#</a> 7 打印字母数小于8的单词</h2> <blockquote><p>写一个<code>bash</code>脚本以统计一个文本文件<code>nowcoder.txt</code>中字母数小于8的单词。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 使用 awk 命令遍历每个单词，NF 表示当前行的单词数，length($i) 表示当前单词的字母数，如果字母数小于8，则打印当前单词。</span>
<span class="token function">awk</span> <span class="token string">'{ for (i=1; i&lt;=NF; i++) if (length($i)&lt;8) print $i }'</span> nowcoder.txt

<span class="token comment"># 使用 grep 命令匹配字母数小于8的单词。-o 选项表示只输出匹配的内容，\b 表示单词边界，\w\{1,7\} 匹配字母数在1到7之间的单词。</span>
<span class="token function">grep</span> <span class="token parameter variable">-o</span> <span class="token string">'\b\w\{1,7\}\b'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_8-统计所有进程占用内存百分比的和"><a href="#_8-统计所有进程占用内存百分比的和" class="header-anchor">#</a> 8 统计所有进程占用内存百分比的和</h2> <blockquote><p>假设 <code>nowcoder.txt</code> 内容如下：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>USER       PID <span class="token operator">%</span>CPU <span class="token operator">%</span>MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         <span class="token number">1</span>  <span class="token number">0.0</span>  <span class="token number">0.4</span>  <span class="token number">77744</span>  <span class="token number">8332</span> <span class="token operator">?</span>        Ss    <span class="token number">2021</span>   <span class="token number">1</span><span class="token operator">:</span><span class="token number">15</span> <span class="token operator">/</span>sbin<span class="token operator">/</span>init noibrs splash
root         <span class="token number">2</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">?</span>        S     <span class="token number">2021</span>   <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span> <span class="token punctuation">[</span>kthreadd<span class="token punctuation">]</span>
root         <span class="token number">4</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>      <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">?</span>        I<span class="token operator">&lt;</span>    <span class="token number">2021</span>   <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span> <span class="token punctuation">[</span>kworker<span class="token operator">/</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">0</span>H<span class="token punctuation">]</span>
daemon     <span class="token number">486</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span>  <span class="token number">28340</span>  <span class="token number">2372</span> <span class="token operator">?</span>        Ss    <span class="token number">2021</span>   <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span> <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>atd <span class="token operator">-</span>f
root       <span class="token number">586</span>  <span class="token number">0.0</span>  <span class="token number">0.3</span>  <span class="token number">72308</span>  <span class="token number">6244</span> <span class="token operator">?</span>        Ss    <span class="token number">2021</span>   <span class="token number">0</span><span class="token operator">:</span><span class="token number">01</span> <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>sshd <span class="token operator">-</span>D
root     <span class="token number">12847</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>   <span class="token number">4528</span>    <span class="token number">68</span> <span class="token operator">?</span>        S<span class="token operator">&lt;</span>   Jan03   <span class="token number">0</span><span class="token operator">:</span><span class="token number">13</span> <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>atopacctd
root     <span class="token number">16306</span>  <span class="token number">1.7</span>  <span class="token number">1.2</span> <span class="token number">151964</span> <span class="token number">26132</span> <span class="token operator">?</span>        S<span class="token operator">&lt;</span>sl Apr15 <span class="token number">512</span><span class="token operator">:</span><span class="token number">03</span> <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>aegis<span class="token operator">/</span>aegis_client<span class="token operator">/</span>aegis_11_25<span class="token operator">/</span>AliYunDun
root     <span class="token number">24143</span>  <span class="token number">0.0</span>  <span class="token number">0.4</span>  <span class="token number">25608</span>  <span class="token number">8652</span> <span class="token operator">?</span>        S<span class="token operator">&lt;</span>Ls <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>   <span class="token number">0</span><span class="token operator">:</span><span class="token number">03</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>atop <span class="token operator">-</span>R <span class="token operator">-</span>w <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>atop<span class="token operator">/</span>atop_20220505 <span class="token number">600</span>
root     <span class="token number">24901</span>  <span class="token number">0.0</span>  <span class="token number">0.3</span> <span class="token number">107792</span>  <span class="token number">7008</span> <span class="token operator">?</span>        Ss   <span class="token number">15</span><span class="token operator">:</span><span class="token number">37</span>   <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span> sshd<span class="token operator">:</span> root@pts<span class="token operator">/</span><span class="token number">0</span>
root     <span class="token number">24903</span>  <span class="token number">0.0</span>  <span class="token number">0.3</span>  <span class="token number">76532</span>  <span class="token number">7580</span> <span class="token operator">?</span>        Ss   <span class="token number">15</span><span class="token operator">:</span><span class="token number">37</span>   <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span> <span class="token operator">/</span>lib<span class="token operator">/</span>systemd<span class="token operator">/</span>systemd <span class="token operator">--</span>user
root     <span class="token number">24904</span>  <span class="token number">0.0</span>  <span class="token number">0.1</span> <span class="token number">111520</span>  <span class="token number">2392</span> <span class="token operator">?</span>        S    <span class="token number">15</span><span class="token operator">:</span><span class="token number">37</span>   <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span> <span class="token punctuation">(</span>sd<span class="token operator">-</span>pam<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>以上内容是通过<code>ps aux</code>命令输出到<code>nowcoder.txt</code>文件中的，请你写一个脚本计算一下所有进程占用内存大小的和。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 使用awk命令过滤到第一行并累加$4</span>
<span class="token function">awk</span> <span class="token string">'BEGIN { sum=0 } NR &gt; 1 { sum+=$4 } END { print sum }'</span> nowcoder.txt

<span class="token comment"># 使用while循环读取，并用if跳过第一行，使用bc进行浮点数加法运算</span>
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">cnt</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> line<span class="token punctuation">;</span>
<span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$cnt</span> <span class="token parameter variable">-gt</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">mem</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $line <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{ print $4 }'</span><span class="token variable">)</span></span>
        <span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$sum</span>+<span class="token variable">$mem</span>&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span>
    <span class="token keyword">fi</span>
    <span class="token assign-left variable">cnt</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>cnt<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><blockquote><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token function">tail</span> <span class="token parameter variable">-n</span> +2 nowcoder.txt <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> line<span class="token punctuation">;</span>
<span class="token keyword">do</span>
    <span class="token assign-left variable">mem</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $line <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{ print $4 }'</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$sum</span>+<span class="token variable">$mem</span>&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$sum</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在 <code>Bash</code> 中，<font color="red">管道中的命令会在子 shell 中执行，因此变量修改不会影响主 shell 中的变量</font>。这就是为什么看到 <code>sum</code> 在循环内部被正确更新，但在循环外部仍然是初始值 <code>0</code>。</p></blockquote> <h2 id="_9-统计每个单词出现的个数"><a href="#_9-统计每个单词出现的个数" class="header-anchor">#</a> 9 统计每个单词出现的个数</h2> <blockquote><p>写一个<code>bash</code>脚本以统计一个文本文件<code>nowcoder.txt</code> 中每个单词出现的个数。</p> <p>为了简单起见，你可以假设：
<code>nowcoder.txt</code>只包括小写字母和空格，每个单词只由小写字母组成，单词间由一个或多个空格字符分隔。</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 将空格转换为换行符，以便每个单词占一行</span>
<span class="token function">tr</span> <span class="token parameter variable">-s</span> <span class="token string">' '</span> <span class="token string">'\n'</span> <span class="token operator">&lt;</span>nowcoder.txt <span class="token operator">|</span>
	<span class="token comment"># 对单词进行排序</span>
	<span class="token function">sort</span> <span class="token operator">|</span>
	<span class="token comment"># 统计每个单词的出现次数</span>
	<span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span>
	<span class="token comment"># 调整输出格式为&quot;单词 词频&quot;</span>
	<span class="token function">awk</span> <span class="token string">'{ print $2, $1 }'</span> <span class="token operator">|</span>
	<span class="token comment"># 按词频升序排序，-k2,2 意味着只使用第二列进行排序，表示按数值进行排序（默认情况按字典序排序）</span>
	<span class="token function">sort</span> -k2,2n 
	
<span class="token comment"># 使用 awk 统计每个单词的出现次数</span>
<span class="token comment"># NF 表示当前行的字段数，即单词数</span>
<span class="token comment"># 使用一个关联数组 cnt 存储每个单词出现的次数</span>

<span class="token function">awk</span> <span class="token string">'{
    for (i=1; i&lt;=NF; i++)  # 遍历当前行的每个单词
        cnt[$i] += 1        # 将单词加入关联数组 cnt，统计出现次数
}
END {
    for (x in cnt)           # 遍历关联数组 cnt
        print x, cnt[x]       # 输出单词和对应的出现次数
}'</span> nowcoder.txt <span class="token operator">|</span> <span class="token function">sort</span> -k2,2n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="_10-第二列是否有重复"><a href="#_10-第二列是否有重复" class="header-anchor">#</a> 10 第二列是否有重复</h2> <blockquote><p>给定一个<code>nowcoder.txt</code>文件，其中有3列信息，如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>20201001 python 99
20201002 go 80
20201002 c++ 88
20201003 php 77
20201001 go 88
20201005 shell 89
20201006 java 70
20201008 c 100
20201007 java 88
20201006 go 97
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>编写一个<code>shell</code>脚本来检查文件第二列是否有重复，且有几个重复，并提取出重复的行的第二列信息（先按次数排序，如果次数相同，按照单词字母顺序排序），输入如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>2 java
3 go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">cat</span> nowcoder.txt <span class="token operator">|</span> 
<span class="token function">awk</span> <span class="token string">'{ print $2 }'</span> <span class="token operator">|</span> 
<span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span> 
<span class="token function">awk</span> <span class="token string">'{ print $1, $2 }'</span> <span class="token operator">|</span> <span class="token comment"># 重新格式化输出</span>
<span class="token function">sort</span> -k1,1n -k2,2 <span class="token operator">|</span> <span class="token comment"># 按照出现次数和字母顺序排序</span>
<span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">'1'</span>	<span class="token comment"># 过滤出现次数不为 1 的行</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_11-转置文件的内容"><a href="#_11-转置文件的内容" class="header-anchor">#</a> 11 转置文件的内容</h2> <blockquote><p>写一个<code>bash</code>脚本来转置文本文件<code>nowcoder.txt</code>中的文件内容。
文件中每行列数相同，并且每个字段由空格分隔</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 读取文件并使用 awk 转置文件内容</span>
<span class="token function">awk</span> <span class="token string">'
{
    # 遍历当前行的每一个字段
    for (i = 1; i &lt;= NF; i++) {
        a[NR, i] = $i  # 将每个字段存储在一个二维数组中，a[行号, 列号] = 值
    }
}
NF &gt; p { p = NF }  # 如果当前行的字段数大于 p，则更新 p 为当前行的字段数

END {
    # 遍历每一列（由最大字段数 p 确定）
    for (i = 1; i &lt;= p; i++) {
        # 遍历每一行（由总行数 NR 确定）
        for (j = 1; j &lt;= NR; j++) {
            printf(&quot;%s%s&quot;, a[j,i], (j==NR ? &quot;&quot; : &quot; &quot;))  # 输出数组中对应的字段值，并在每个字段后添加空格，除非是最后一个字段
        }
        printf(&quot;\n&quot;)  # 每一列输出完之后换行
    }
}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_12-打印每一行出现的数字个数"><a href="#_12-打印每一行出现的数字个数" class="header-anchor">#</a> 12 打印每一行出现的数字个数</h2> <blockquote><p>写一个<code>bash</code>脚本，统计一个文本文件<code>nowcoder.txt</code>中每一行出现的<code>1~5</code>数字的个数，并且计算一下整个文档中一共出现了几个<code>1~5</code>数字的总数。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 使用 awk 读取文件并统计每行中包含的特定数字（1, 2, 3, 4, 5）的数量</span>
<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;[1,2,3,4,5]&quot;</span> <span class="token string">'
BEGIN { 
    sum = 0  # 初始化 sum 变量，用于存储总和
} {
    # 打印当前行号 NR 以及当前行中包含的特定数字的数量 (NF - 1)
    print(&quot;line&quot; NR &quot; number: &quot; (NF - 1))
    
    # 将当前行中包含的特定数字的数量累加到 sum
    sum += (NF - 1)
} END {
    # 打印总和
    print(&quot;sum is &quot; sum)
}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_13-去掉所有包含this的句子"><a href="#_13-去掉所有包含this的句子" class="header-anchor">#</a> 13 去掉所有包含this的句子</h2> <blockquote><p>编写一个<code>shell</code>脚本以实现如下功能：去掉输入中含有<code>this</code>的语句，把不含<code>this</code>的语句输出</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># -v 反转匹配</span>
<span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;this&quot;</span> nowcoder.txt

<span class="token comment"># sed 命令 -&gt; d 删除 -&gt; // 包含要搜索的字符串</span>
<span class="token function">sed</span> <span class="token string">'/this/d'</span> nowcoder.txt

<span class="token comment"># awk 命令，$0为当前行的所有内容，!~ 是 awk 的模式匹配运算符，表示模式不匹配</span>
<span class="token function">awk</span> <span class="token string">'$0!~/this/ {print $0}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_14-求平均值"><a href="#_14-求平均值" class="header-anchor">#</a> 14 求平均值</h2> <blockquote><p>写一个<code>bash</code>脚本以实现一个需求，求输入的一个数组的平均值</p> <p>第<code>1</code>行为输入的数组长度<code>N</code></p> <p>第<code>2~N</code>行为数组的元素，如以下为:
数组长度为<code>4</code>，数组元素为<code>1 2 9 8</code></p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">awk</span> <span class="token string">'BEGIN {
    sum = 0
}{
    if (NR == 1) {
        N = $1  # 将第一行的数字数量保存到变量 N 中
    } else {
        sum += $1  # 对随后的数字进行累加求和
    }
} END {
    printf(&quot;%.3f&quot;, sum / N)  # 输出平均值，保留三位小数
}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_15-去掉不需要的单词"><a href="#_15-去掉不需要的单词" class="header-anchor">#</a> 15 去掉不需要的单词</h2> <blockquote><p>写一个<code>bash</code>脚本以实现一个需求，去掉输入中含有<code>B</code>和<code>b</code>的单词。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 使用 sed -n 命令打印不包含 'B' 和 'b' 的行</span>
<span class="token comment"># /^[^bB]*$/ 表示匹配不包含 'B' 和 'b' 的行，^ 表示行开头，[^bB] 表示不包含 'B' 和 'b' 的任何字符，* 表示零次或多次重复，$ 表示行结尾</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">'/^[^bB]*$/p'</span> nowcoder.txt

<span class="token comment"># 使用 grep -E -v 命令排除包含 'B' 和 'b' 的行</span>
<span class="token comment"># -E 选项启用扩展的正则表达式，-v 选项表示反转匹配</span>
<span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;[bB]&quot;</span> nowcoder.txt

<span class="token comment"># 使用 awk 命令，遍历每个单词，如果不包含 'B' 和 'b'，则输出该单词</span>
<span class="token function">awk</span> <span class="token string">'{
    for (i = 1;i &lt;= NF; i++) {
        if ($i !~ /b|B/) {  # 使用正则表达式匹配单词中不包含 '</span>B<span class="token string">' 和 '</span>b<span class="token string">' 的部分
            printf(&quot;%s &quot;, $i)  # 输出不包含 '</span>B<span class="token string">' 和 '</span>b<span class="token string">' 的单词
        }
    }
}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_16-判断输入的是否为ip地址"><a href="#_16-判断输入的是否为ip地址" class="header-anchor">#</a> 16 判断输入的是否为IP地址</h2> <blockquote><p>写一个脚本统计文件<code>nowcoder.txt</code>中的每一行是否是正确的<code>IP</code>地址。</p> <p>如果是正确的<code>IP</code>地址输出：<code>yes</code></p> <p>如果是错误的<code>IP</code>地址，且是四段号码的话输出：<code>no</code>，否则的话输出：<code>error</code></p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;.&quot;</span> <span class="token string">'{
    flag = &quot;error&quot;
    if (NF == 4) {
        flag = &quot;yes&quot;
        for (i = 1; i &lt;= NF; i++) {
            if ($i &gt; 255) {
                flag = &quot;no&quot;;
                break;
            }
        }
    }
    printf(flag&quot;\n&quot;)
}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_17-将字段逆序输出文件的每行"><a href="#_17-将字段逆序输出文件的每行" class="header-anchor">#</a> 17 将字段逆序输出文件的每行</h2> <blockquote><p>编写一个<code>shell</code>脚本，将文件<code>nowcoder.txt</code>中每一行的字段逆序输出，其中字段之间使用英文冒号<code>:</code>相分隔。</p> <p>假设<code>nowcoder.txt</code>内容如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false
root:*:0:0:System Administrator:/var/root:/bin/sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>你的脚本应当输出</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>/usr/bin/false:/var/empty:Unprivileged User:-2:-2:*:nobody
/bin/sh:/var/root:System Administrator:0:0:*:root
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'{
    for (i = 1; i &lt;= NF; i++) {
        temp[i] = $i
    }
    for (i = NF; i &gt;= 1; i--) {
        printf(&quot;%s%s&quot;, temp[i], (i == 1 ? &quot;\n&quot; : &quot;:&quot;))
    }
}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_18-域名进行计数排序处理"><a href="#_18-域名进行计数排序处理" class="header-anchor">#</a> 18 域名进行计数排序处理</h2> <blockquote><p>假设有一些域名，存储在<code>nowcoder.txt</code>里，现在需要写一个<code>shell</code>脚本，将域名取出并根据域名进行计数排序处理（降序）。</p> <p>假设<code>nowcoder.txt</code>内容如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>http://www.nowcoder.com/index.html
http://www.nowcoder.com/1.html
http://m.nowcoder.com/index.html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>你的脚本应该输出：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>2 www.nowcoder.com
1 m.nowcoder.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">'/'</span> <span class="token string">'{
    print($3)
}'</span> nowcoder.txt <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{
    print($1&quot; &quot;$2)
}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_19-打印等腰三角形"><a href="#_19-打印等腰三角形" class="header-anchor">#</a> 19 打印等腰三角形</h2> <blockquote><p>编写一个<code>shell</code>脚本，输入正整数<code>n</code>，打印边长为<code>n</code>的等腰三角形。</p> <p>示例：</p> <p>输入：<code>5</code></p> <p>输出：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>    *
   * *
  * * *
 * * * *
* * * * *
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">read</span> n
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
    <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">))</span></span>
    <span class="token keyword">do</span>
        <span class="token builtin class-name">printf</span> <span class="token string">&quot; &quot;</span>
    <span class="token keyword">done</span>
    <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">))</span></span>
    <span class="token keyword">do</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$j</span> <span class="token parameter variable">-eq</span> <span class="token variable">$i</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">printf</span> <span class="token string">&quot;*&quot;</span>
        <span class="token keyword">else</span>
            <span class="token builtin class-name">printf</span> <span class="token string">&quot;* &quot;</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">done</span>
    <span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_20-打印只有一个数字的行"><a href="#_20-打印只有一个数字的行" class="header-anchor">#</a> 20 打印只有一个数字的行</h2> <blockquote><p>假设有一个<code>nowcoder.txt</code>，编写脚本，打印只有一个数字的行。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;[0-9]&quot;</span> <span class="token string">'{
    if (NF == 2) {
        print($0)
    }
}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_21-格式化输出"><a href="#_21-格式化输出" class="header-anchor">#</a> 21 格式化输出</h2> <blockquote><p>有一个文件<code>nowcoder.txt</code>，里面的每一行都是一个数字串，编写一个<code>shell</code>脚本对文件中每一行的数字串进行格式化：每<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>个数字加入一个逗号（,）。</p> <p>例如：数字串为“123456789”，那么需要格式化为123,456,789。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 使用-F分割数字串</span>
<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;&quot;</span> <span class="token string">'{
    for (i = 1; i &lt;= NF; i++) {
        printf($i)
        if ((NF - i) % 3 == 0 &amp;&amp; i != NF) {
            printf(&quot;,&quot;)
        }
    }
    printf(&quot;\n&quot;)
}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_22-处理文本"><a href="#_22-处理文本" class="header-anchor">#</a> 22 处理文本</h2> <blockquote><p>有一个文本文件<code>nowcoder.txt</code>，假设内容格式如下：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>111:13443
222:13211
111:13643
333:12341
222:12123
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>现在需要编写一个<code>shell</code>脚本，按照以下的格式输出：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[111]
13443
13643
[222]
13211
12123
[333]
12341
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'{
    cnt[$1] = cnt[$1] $2 &quot;\n&quot;
} END {
    for (i in cnt) {
        printf(&quot;[%s]\n%s&quot;, i, cnt[i])
    }
}'</span> nowcoder.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_23-nginx日志分析1-ip访问次数统计"><a href="#_23-nginx日志分析1-ip访问次数统计" class="header-anchor">#</a> 23 Nginx日志分析1-IP访问次数统计</h2> <blockquote><p>假设 <code>Nginx</code> 的日志存储在 <code>nowcoder.txt</code> 里，内容如下：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.20</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">21</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.21</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">21</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /2/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.22</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">21</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /3/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.23</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">21</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.24</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">22</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /2/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.25</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">22</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /3/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.20</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">08</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.21</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.22</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.22</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.20</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.21</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /2/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.22</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /3/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.25</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.24</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /2/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.25</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /3/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.20</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.21</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.22</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.22</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
<span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.21</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token operator">/</span>Apr<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">27</span><span class="token operator">:</span><span class="token number">49</span> <span class="token operator">+</span><span class="token number">0800</span><span class="token punctuation">]</span> <span class="token string">&quot;GET /1/index.php HTTP/1.1&quot;</span> <span class="token number">404</span> <span class="token number">490</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要编写 Shell 脚本统计出 2020 年 4 月 23 号访问 IP 的对应次数，并且按照次数降序排序。你的脚本应该输出：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token number">5</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.22</span>
<span class="token number">4</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.21</span>
<span class="token number">3</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.20</span>
<span class="token number">2</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.25</span>
<span class="token number">1</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.24</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 通过grep过滤，再统计排序</span>
<span class="token function">grep</span> <span class="token string">&quot;23/Apr/2020&quot;</span> nowcoder.txt <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $1 }'</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $1, $2 }'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_24-nginx日志分析2-统计某个时间段的ip访问量"><a href="#_24-nginx日志分析2-统计某个时间段的ip访问量" class="header-anchor">#</a> 24 Nginx日志分析2-统计某个时间段的IP访问量</h2> <blockquote><p>假设 <code>Nginx</code> 的日志存储在 <code>nowcoder.txt</code> 里，内容如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要编写 <code>Shell</code> 脚本统计 2020年04月23日20点至23点去重后的 IP 访问量，你的脚本应该输出：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输出说明：2020年04月23日20点至23点，共有 192.168.1.24、192.168.1.25、192.168.1.20、192.168.1.21、192.168.1.22 共 5 个 IP 访问了。</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">grep</span> <span class="token string">&quot;23/Apr/2020:2[0-3]&quot;</span> nowcoder.txt <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $1 }'</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token function">uniq</span> <span class="token operator">|</span>
<span class="token function">wc</span> <span class="token parameter variable">-l</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_25-nginx日志分析3-统计访问3次以上的ip"><a href="#_25-nginx日志分析3-统计访问3次以上的ip" class="header-anchor">#</a> 25 nginx日志分析3-统计访问3次以上的IP</h2> <blockquote><p>假设<code>nginx</code>的日志我们存储在nowcoder.txt里，格式如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要编写<code>shell</code>脚本统计访问3次以上的IP，你的脚本应该输出：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>6 192.168.1.22
5 192.168.1.21
4 192.168.1.20
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">awk</span> <span class="token string">'{ print $1 }'</span> nowcoder.txt <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{
    if ($1 &gt; 3) {
        print $1, $2
    }
}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_26-nginx日志分析4-查询某个ip的详细访问情况"><a href="#_26-nginx日志分析4-查询某个ip的详细访问情况" class="header-anchor">#</a> 26 Nginx日志分析4-查询某个IP的详细访问情况</h2> <blockquote><p>假设<code>Nginx</code>的日志存储在<code>nowcoder.txt</code>里，内容如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要编写<code>shell</code>脚本查询192.168.1.22的详细访问次数情况，按访问频率降序排序。你的脚本应该输出：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token number">4</span> <span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span>index<span class="token punctuation">.</span>php
<span class="token number">2</span> <span class="token operator">/</span><span class="token number">3</span><span class="token operator">/</span>index<span class="token punctuation">.</span>php
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">grep</span> <span class="token string">&quot;192.168.1.22&quot;</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $7 }'</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $1, $2 }'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_27-nginx日志分析5-统计爬虫抓取404的次数"><a href="#_27-nginx日志分析5-统计爬虫抓取404的次数" class="header-anchor">#</a> 27 nginx日志分析5-统计爬虫抓取404的次数</h2> <blockquote><p>假设<code>nginx</code>的日志存储在<code>nowcoder.txt</code>里，内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>192.168.1.20 - - [21/Apr/2020:14:12:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 301 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 500 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:21:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:10:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:05:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:12:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&quot;
192.168.1.22 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 200 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 300 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 500 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:10:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:59:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要编写<code>shell</code>脚本统计百度爬虫抓取404的次数，你的脚本应该输出</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">grep</span> <span class="token string">&quot;404&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;www.baidu.com&quot;</span> <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_28-nginx日志分析6-统计每分钟的请求数"><a href="#_28-nginx日志分析6-统计每分钟的请求数" class="header-anchor">#</a> 28 Nginx日志分析6-统计每分钟的请求数</h2> <blockquote><p>假设<code>Nginx</code>的日志存储在nowcoder.txt里，内容如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>192.168.1.20 - - [21/Apr/2020:14:12:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [21/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [21/Apr/2020:21:21:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.23 - - [21/Apr/2020:22:10:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [22/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:08:05:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Baiduspider&quot;
192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:14:12:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:15:00:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Baiduspider&quot;
192.168.1.25 - - [23/Apr/2020:16:15:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /2/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /3/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.22 - - [23/Apr/2020:22:10:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
192.168.1.21 - - [23/Apr/2020:23:59:49 +0800] &quot;GET /1/index.php HTTP/1.1&quot; 404 490 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在需要编写<code>Shell</code>脚本统计每分钟的请求数，并且按照请求数降序排序。你的脚本应该输出：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token number">5</span> <span class="token number">20</span><span class="token operator">:</span><span class="token number">27</span>
<span class="token number">4</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">00</span>
<span class="token number">2</span> <span class="token number">22</span><span class="token operator">:</span><span class="token number">10</span>
<span class="token number">2</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">12</span>
<span class="token number">2</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">27</span>
<span class="token number">1</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">59</span>
<span class="token number">1</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">21</span>
<span class="token number">1</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">15</span>
<span class="token number">1</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">26</span>
<span class="token number">1</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">20</span>
<span class="token number">1</span> <span class="token number">08</span><span class="token operator">:</span><span class="token number">05</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'{ print $2&quot;:&quot;$3 }'</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $1, $2 }'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_29-netstat练习1-查看各个状态的连接数"><a href="#_29-netstat练习1-查看各个状态的连接数" class="header-anchor">#</a> 29 netstat练习1-查看各个状态的连接数</h2> <blockquote><p>假设netstat命令运行的结果我们存储在nowcoder.txt里，格式如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:42316     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
udp        0      0 127.0.0.1:323           0.0.0.0:*
udp        0      0 0.0.0.0:45881           0.0.0.0:*
udp        0      0 127.0.0.53:53           0.0.0.0:*
udp        0      0 172.16.56.200:68        0.0.0.0:*
udp6       0      0 ::1:323                 :::*
raw6       0      0 :::58                   :::*                    7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>现在需要编写shell脚本查看系统tcp连接中各个状态的连接数，并且按照连接数降序输出。你的脚本应该输出如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>ESTABLISHED 22
TIME_WAIT 9
LISTEN 3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">grep</span> <span class="token string">&quot;tcp&quot;</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $6 }'</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token parameter variable">-nr</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $2, $1 }'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_30-netstat练习2-查看和3306端口建立的连接"><a href="#_30-netstat练习2-查看和3306端口建立的连接" class="header-anchor">#</a> 30 netstat练习2-查看和3306端口建立的连接</h2> <blockquote><p>假设netstat命令运行的结果我们存储在nowcoder.txt里，格式如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:42316     172.16.34.143:3306      ESTABLISHED
tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
udp        0      0 127.0.0.1:323           0.0.0.0:*
udp        0      0 0.0.0.0:45881           0.0.0.0:*
udp        0      0 127.0.0.53:53           0.0.0.0:*
udp        0      0 172.16.56.200:68        0.0.0.0:*
udp6       0      0 ::1:323                 :::*
raw6       0      0 :::58                   :::*                    7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>现在需要你查看和本机3306端口建立连接并且状态是<code>established</code>的所有IP，按照连接数降序排序。你的脚本应该输出</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>10 172.16.0.24
9 172.16.34.144
1 172.16.34.143
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">grep</span> <span class="token string">&quot;tcp.*ESTABLISHED&quot;</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $5 }'</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'$2 == 3306 { print $1 }'</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token parameter variable">-nr</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $1, $2 }'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_31-netstat练习3-输出每个ip的连接数"><a href="#_31-netstat练习3-输出每个ip的连接数" class="header-anchor">#</a> 31 netstat练习3-输出每个IP的连接数</h2> <blockquote><p>假设<code>netstat</code>命令运行的结果我们存储在<code>nowcoder.txt</code>里，格式如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:42316     172.16.34.143:3306      ESTABLISHED
tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
udp        0      0 127.0.0.1:323           0.0.0.0:*
udp        0      0 0.0.0.0:45881           0.0.0.0:*
udp        0      0 127.0.0.53:53           0.0.0.0:*
udp        0      0 172.16.56.200:68        0.0.0.0:*
udp6       0      0 ::1:323                 :::*
raw6       0      0 :::58                   :::*                    7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>现在需要你输出每个IP的连接数，按照连接数降序排序。你的脚本应该输出</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>172.16.0.24 10
172.16.34.144 9
100.100.142.4 3
0.0.0.0 3
172.16.34.143 1
172.16.240.74 1
120.55.222.235 1
100.100.54.133 1
100.100.45.106 1
100.100.32.118 1
100.100.30.25 1
100.100.142.5 1
100.100.142.1 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">grep</span> <span class="token string">&quot;tcp&quot;</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $5 }'</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'{ print $1 }'</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token function">uniq</span> <span class="token parameter variable">-c</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token parameter variable">-nr</span> <span class="token operator">|</span>
<span class="token function">awk</span> <span class="token string">'{ print $2, $1 }'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_32-netstat练习4-输出和3306端口建立连接总的各个状态的数目"><a href="#_32-netstat练习4-输出和3306端口建立连接总的各个状态的数目" class="header-anchor">#</a> 32 netstat练习4-输出和3306端口建立连接总的各个状态的数目</h2> <blockquote><p>假设<code>netstat</code>命令运行的结果我们存储在<code>nowcoder.txt</code>里，格式如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:42316     172.16.34.143:3306      ESTABLISHED
tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
udp        0      0 127.0.0.1:323           0.0.0.0:*
udp        0      0 0.0.0.0:45881           0.0.0.0:*
udp        0      0 127.0.0.53:53           0.0.0.0:*
udp        0      0 172.16.56.200:68        0.0.0.0:*
udp6       0      0 ::1:323                 :::*
raw6       0      0 :::58                   :::*                    7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>现在需要你输出和本机3306端口建立连接的各个状态的数目，按照以下格式输出
<code>TOTAL_IP</code>表示建立连接的ip数目</p> <p><code>TOTAL_LINK</code>表示建立连接的总数目</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>TOTAL_IP 3
ESTABLISHED 20
TOTAL_LINK 20
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 统计包含3306且协议为tcp的总IP数量</span>
<span class="token assign-left variable">TOTAL_IP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> <span class="token string">&quot;tcp&quot;</span> nowcoder.txt <span class="token operator">|</span>
	<span class="token function">awk</span> <span class="token string">'{ print $5 }'</span> <span class="token operator">|</span>
	<span class="token function">awk</span> -F: <span class="token string">'$2 == 3306 {print $1, $2 }'</span> <span class="token operator">|</span>
	<span class="token function">sort</span> <span class="token operator">|</span>
	<span class="token function">uniq</span> <span class="token operator">|</span>
	<span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">)</span></span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;TOTAL_IP <span class="token variable">$TOTAL_IP</span>&quot;</span>

<span class="token comment"># 统计包含3306且状态为ESTABLISHED且协议为tcp的数量</span>
<span class="token assign-left variable">ESTABLISHED</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">awk</span> <span class="token string">'/3306/ { if ($6 == &quot;ESTABLISHED&quot; &amp;&amp; $1 == &quot;tcp&quot;) print $5 }'</span> nowcoder.txt <span class="token operator">|</span>
	<span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">)</span></span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;ESTABLISHED <span class="token variable">$ESTABLISHED</span>&quot;</span>

<span class="token comment"># 统计包含3306且协议为tcp的连接数量</span>
<span class="token assign-left variable">TOTAL_LINK</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">awk</span> <span class="token string">'/3306/ { if ($1 == &quot;tcp&quot;) print $5 }'</span> nowcoder.txt <span class="token operator">|</span>
	<span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">)</span></span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;TOTAL_LINK <span class="token variable">$TOTAL_LINK</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_33-业务分析-提取值"><a href="#_33-业务分析-提取值" class="header-anchor">#</a> 33 业务分析-提取值</h2> <blockquote><p>假设我们的日志<code>nowcoder.txt</code>里，内容如下</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>12-May-2017 10:02:22.789 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:Apache Tomcat/8.5.15
12-May-2017 10:02:22.813 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:May 5 2017 11:03:04 UTC
12-May-2017 10:02:22.813 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:8.5.15.0
12-May-2017 10:02:22.814 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:Windows, OS Version:10
12-May-2017 10:02:22.814 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>现在需要你提取出对应的值，输出内容如下</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>serverVersion:Apache Tomcat/8.5.15
serverName:8.5.15.0
osName:Windows
osVersion:10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">grep</span> <span class="token parameter variable">-o</span> <span class="token string">&quot;Server version:.*&quot;</span> nowcoder.txt <span class="token operator">|</span>
	<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'{print &quot;serverVersion:&quot; $2}'</span>
<span class="token function">grep</span> <span class="token parameter variable">-o</span> <span class="token string">&quot;Server number:.*&quot;</span> nowcoder.txt <span class="token operator">|</span>
	<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'{print &quot;serverName:&quot; $2}'</span>
<span class="token function">grep</span> <span class="token parameter variable">-o</span> <span class="token string">&quot;OS Name:.*&quot;</span> nowcoder.txt <span class="token operator">|</span>
	<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;[:,]&quot;</span> <span class="token string">'{print &quot;osName:&quot; $2}'</span>
<span class="token function">grep</span> <span class="token parameter variable">-o</span> <span class="token string">&quot;OS Version:.*&quot;</span> nowcoder.txt <span class="token operator">|</span>
	<span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">'{print &quot;osVersion:&quot; $2}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_34-ps分析-统计vsz-rss各自总和"><a href="#_34-ps分析-统计vsz-rss各自总和" class="header-anchor">#</a> 34 ps分析-统计VSZ,RSS各自总和</h2> <blockquote><p>假设命令运行的结果我们存储在<code>nowcoder.txt</code>里，格式如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.1  37344  4604 ?        Ss    2020   2:13 /sbin/init
root       231  0.0  1.5 166576 62740 ?        Ss    2020  15:15 /lib/systemd/systemd-journald
root       237  0.0  0.0      0     0 ?        S&lt;    2020   2:06 [kworker/0:1H]
root       259  0.0  0.0  45004  3416 ?        Ss    2020   0:25 /lib/systemd/systemd-udevd
root       476  0.0  0.0      0     0 ?        S&lt;    2020   0:00 [edac-poller]
root       588  0.0  0.0 276244  2072 ?        Ssl   2020   9:49 /usr/lib/accountsservice/accounts-daemon
message+   592  0.0  0.0  42904  3032 ?        Ss    2020   0:01 /usr/bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation
root       636  0.0  0.0  65532  3200 ?        Ss    2020   1:51 /usr/sbin/sshd -D
daemon     637  0.0  0.0  26044  2076 ?        Ss    2020   0:00 /usr/sbin/atd -f
root       639  0.0  0.0  29476  2696 ?        Ss    2020   3:29 /usr/sbin/cron -f
root       643  0.0  0.0  20748  1992 ?        Ss    2020   0:26 /lib/systemd/systemd-logind
syslog     645  0.0  0.0 260636  3024 ?        Ssl   2020   3:17 /usr/sbin/rsyslogd -n
root       686  0.0  0.0 773124  2836 ?        Ssl   2020  26:45 /usr/sbin/nscd
root       690  0.0  0.0  19472   252 ?        Ss    2020  14:39 /usr/sbin/irqbalance --pid=/var/run/irqbalance.pid
ntp        692  0.0  0.0  98204   776 ?        Ss    2020  25:18 /usr/sbin/ntpd -p /var/run/ntpd.pid -g -u 108:114
uuidd      767  0.0  0.0  28624   192 ?        Ss    2020   0:00 /usr/sbin/uuidd --socket-activation
root       793  0.0  0.0 128812  3148 ?        Ss    2020   0:00 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
www-data   794  0.0  0.2 133376  9120 ?        S     2020 630:57 nginx: worker process
www-data   795  0.0  0.2 133208  8968 ?        S     2020 633:02 nginx: worker process
www-data   796  0.0  0.2 133216  9120 ?        S     2020 634:24 nginx: worker process
www-data   797  0.0  0.2 133228  9148 ?        S     2020 632:56 nginx: worker process
web        955  0.0  0.0  36856  2112 ?        Ss    2020   0:00 /lib/systemd/systemd --user
web        956  0.0  0.0  67456  1684 ?        S     2020   0:00 (sd-pam)
root      1354  0.0  0.0   8172   440 tty1     Ss+   2020   0:00 /sbin/agetty --noclear tty1 linux
root      1355  0.0  0.0   7988   344 ttyS0    Ss+   2020   0:00 /sbin/agetty --keep-baud 115200 38400 9600 ttyS0 vt220
root      2513  0.0  0.0      0     0 ?        S    13:07   0:00 [kworker/u4:1]
root      2587  0.0  0.0      0     0 ?        S    13:13   0:00 [kworker/u4:2]
root      2642  0.0  0.0      0     0 ?        S    13:17   0:00 [kworker/1:0]
root      2679  0.0  0.0      0     0 ?        S    13:19   0:00 [kworker/u4:0]
root      2735  0.0  0.1 102256  7252 ?        Ss   13:24   0:00 sshd: web [priv]
web       2752  0.0  0.0 102256  3452 ?        R    13:24   0:00 sshd: web@pts/0
web       2753  0.5  0.1  14716  4708 pts/0    Ss   13:24   0:00 -bash
web       2767  0.0  0.0  29596  1456 pts/0    R+   13:24   0:00 ps aux
root     10634  0.0  0.0      0     0 ?        S    Nov16   0:00 [kworker/0:0]
root     16585  0.0  0.0      0     0 ?        S&lt;    2020   0:00 [bioset]
root     19526  0.0  0.0      0     0 ?        S    Nov16   0:00 [kworker/1:1]
root     28460  0.0  0.0      0     0 ?        S    Nov15   0:03 [kworker/0:2]
root     30685  0.0  0.0  36644  2760 ?        Ss    2020   0:00 /lib/systemd/systemd --user
root     30692  0.0  0.0  67224  1664 ?        S     2020   0:00 (sd-pam)
root     32689  0.0  0.0  47740  2100 ?        Ss    2020   0:00 /usr/local/ilogtail/ilogtail
root     32691  0.2  0.5 256144 23708 ?        Sl    2020 1151:31 /usr/local/ilogtail/ilogtail
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>现在需要你统计<code>VSZ</code>，<code>RSS</code>各自的总和（以M兆为统计），输出格式如下</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>MEM TOTAL
VSZ_SUM:3250.8M,RSS_SUM:179.777M
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">awk</span> <span class="token string">'{
    sum_vsz = sum_vsz + $5
    sum_rss = sum_rss + $6
}END{
    print(&quot;MEM TOTAL \n&quot; &quot;VSZ_SUM:&quot; sum_vsz/1024 &quot;M,&quot; &quot;RSS_SUM:&quot; sum_rss/1024 &quot;M&quot;)}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div></div> <div class="page-slot page-slot-bottom"><div class="donation">
      <button>打赏</button>
      <div class="main">
        <div class="pic">
          <img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/wechatpay.jpeg" alt="微信">
          <img src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/zhifubaopay.jpeg" alt="支付宝">
        </div>
      </div>  
    </div></div> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Shell" title="标签">#Shell</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/06/09, 21:21:48</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/ae59ea/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Shell 教程</div></a> <a href="/pages/77a74b/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">进程介绍</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/ae59ea/" class="prev">Shell 教程</a></span> <span class="next"><a href="/pages/77a74b/">进程介绍</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/44470f/"><div>
            【论文阅读笔记】DeepCAD: A Deep Generative Network for Computer-Aided Design Models
            <!----></div></a> <span class="date">07-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/e7f6f5/"><div>
            【论文阅读笔记】Attention Is All You Need
            <!----></div></a> <span class="date">07-07</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/ae59ea/"><div>
            Shell 教程
            <!----></div></a> <span class="date">06-09</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:unique.hzf@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/unique-pure" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://pursuit.blog.csdn.net/" title="My CSDN" target="_blank" class="iconfont icon-csdn"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2024
    <span>Pursuit | <a href="https://github.com/unique-pure/my-vdoing-blog-template/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><div></div><WebInfo></WebInfo><PageInfo></PageInfo><div></div></div></div>
    <script src="/assets/js/app.bf22d313.js" defer></script><script src="/assets/js/4.71a85121.js" defer></script><script src="/assets/js/1.4a1189e9.js" defer></script><script src="/assets/js/3.bca043f9.js" defer></script><script src="/assets/js/103.94fdd963.js" defer></script><script src="/assets/js/20.bc1029fc.js" defer></script>
  </body>
</html>
